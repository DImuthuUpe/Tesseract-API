<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tesseract: /home/rays/src/opensrc/tesseract-ocr/classify/trainingsample.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>/home/rays/src/opensrc/tesseract-ocr/classify/trainingsample.h</h1><a href="trainingsample_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright 2010 Google Inc. All Rights Reserved.</span>
<a name="l00002"></a>00002 <span class="comment">// Author: rays@google.com (Ray Smith)</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00005"></a>00005 <span class="comment">// you may not use this file except in compliance with the License.</span>
<a name="l00006"></a>00006 <span class="comment">// You may obtain a copy of the License at</span>
<a name="l00007"></a>00007 <span class="comment">// http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00008"></a>00008 <span class="comment">// Unless required by applicable law or agreed to in writing, software</span>
<a name="l00009"></a>00009 <span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00010"></a>00010 <span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00011"></a>00011 <span class="comment">// See the License for the specific language governing permissions and</span>
<a name="l00012"></a>00012 <span class="comment">// limitations under the License.</span>
<a name="l00013"></a>00013 <span class="comment">//</span>
<a name="l00015"></a>00015 <span class="comment"></span>
<a name="l00016"></a>00016 <span class="preprocessor">#ifndef TESSERACT_TRAINING_TRAININGSAMPLE_H__</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span><span class="preprocessor">#define TESSERACT_TRAINING_TRAININGSAMPLE_H__</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="elst_8h.html">elst.h</a>&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="featdefs_8h.html">featdefs.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="intfx_8h.html">intfx.h</a>&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="intmatcher_8h.html">intmatcher.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="matrix_8h.html">matrix.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="mf_8h.html">mf.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="picofeat_8h.html">picofeat.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="shapetable_8h.html">shapetable.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="unicharset_8h.html">unicharset.h</a>&quot;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="keyword">struct </span>Pix;
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="keyword">namespace </span>tesseract {
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="keyword">class </span>IntFeatureMap;
<a name="l00034"></a>00034 <span class="keyword">class </span>IntFeatureSpace;
<a name="l00035"></a>00035 <span class="keyword">class </span>ShapeTable;
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="comment">// Number of elements of cn_feature_.</span>
<a name="l00038"></a>00038 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kNumCNParams = 4;
<a name="l00039"></a>00039 <span class="comment">// Number of ways to shift the features when randomizing.</span>
<a name="l00040"></a>00040 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kSampleYShiftSize = 5;
<a name="l00041"></a>00041 <span class="comment">// Number of ways to scale the features when randomizing.</span>
<a name="l00042"></a>00042 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kSampleScaleSize = 3;
<a name="l00043"></a>00043 <span class="comment">// Total number of different ways to manipulate the features when randomizing.</span>
<a name="l00044"></a>00044 <span class="comment">// The first and last combinations are removed to avoid an excessive</span>
<a name="l00045"></a>00045 <span class="comment">// top movement (first) and an identity transformation (last).</span>
<a name="l00046"></a>00046 <span class="comment">// WARNING: To avoid patterned duplication of samples, be sure to keep</span>
<a name="l00047"></a>00047 <span class="comment">// kSampleRandomSize prime!</span>
<a name="l00048"></a>00048 <span class="comment">// Eg with current values (kSampleYShiftSize = 5 and TkSampleScaleSize = 3)</span>
<a name="l00049"></a>00049 <span class="comment">// kSampleRandomSize is 13, which is prime.</span>
<a name="l00050"></a>00050 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kSampleRandomSize = kSampleYShiftSize * kSampleScaleSize - 2;
<a name="l00051"></a>00051 <span class="comment">// ASSERT_IS_PRIME(kSampleRandomSize) !!</span>
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="classtesseract_1_1_training_sample.html">00053</a> <span class="keyword">class </span><a class="code" href="classtesseract_1_1_training_sample.html">TrainingSample</a> : <span class="keyword">public</span> <a class="code" href="class_e_l_i_s_t___l_i_n_k.html">ELIST_LINK</a> {
<a name="l00054"></a>00054  <span class="keyword">public</span>:
<a name="l00055"></a><a class="code" href="classtesseract_1_1_training_sample.html#a16644d35b7054101e7255b8564c0aabc">00055</a>   <a class="code" href="classtesseract_1_1_training_sample.html#a16644d35b7054101e7255b8564c0aabc">TrainingSample</a>()
<a name="l00056"></a>00056     : class_id_(INVALID_UNICHAR_ID), font_id_(0), page_num_(0),
<a name="l00057"></a>00057       num_features_(0), num_micro_features_(0),
<a name="l00058"></a>00058       features_(<a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>), micro_features_(<a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>), weight_(1.0),
<a name="l00059"></a>00059       max_dist_(0.0), sample_index_(0),
<a name="l00060"></a>00060       features_are_indexed_(false), features_are_mapped_(false),
<a name="l00061"></a>00061       is_error_(false) {
<a name="l00062"></a>00062   }
<a name="l00063"></a>00063   <a class="code" href="classtesseract_1_1_training_sample.html#a746ed1e28ceac5a69411c451ac2882f0">~TrainingSample</a>();
<a name="l00064"></a>00064 
<a name="l00065"></a>00065   <span class="comment">// Saves the given features into a TrainingSample. The features are copied,</span>
<a name="l00066"></a>00066   <span class="comment">// so may be deleted afterwards. Delete the return value after use.</span>
<a name="l00067"></a>00067   <span class="keyword">static</span> <a class="code" href="classtesseract_1_1_training_sample.html">TrainingSample</a>* <a class="code" href="classtesseract_1_1_training_sample.html#a27caf67effba8d44e8ff327f38a4f575">CopyFromFeatures</a>(<span class="keyword">const</span> <a class="code" href="struct_i_n_t___f_x___r_e_s_u_l_t___s_t_r_u_c_t.html">INT_FX_RESULT_STRUCT</a>&amp; fx_info,
<a name="l00068"></a>00068                                           <span class="keyword">const</span> <a class="code" href="struct_i_n_t___f_e_a_t_u_r_e___s_t_r_u_c_t.html">INT_FEATURE_STRUCT</a>* <a class="code" href="classtesseract_1_1_training_sample.html#a49c3df6faa918fc29a058e6bc434a7c9">features</a>,
<a name="l00069"></a>00069                                           <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_training_sample.html#af3afdc90346e10f5f4497ea7a89882aa">num_features</a>);
<a name="l00070"></a>00070   <span class="comment">// Constructs and returns a copy &quot;randomized&quot; by the method given by</span>
<a name="l00071"></a>00071   <span class="comment">// the randomizer index. If index is out of [0, kSampleRandomSize) then</span>
<a name="l00072"></a>00072   <span class="comment">// an exact copy is returned.</span>
<a name="l00073"></a>00073   <a class="code" href="classtesseract_1_1_training_sample.html">TrainingSample</a>* <a class="code" href="classtesseract_1_1_training_sample.html#a164de38223d7efe36a6e9deaecdd2a37">RandomizedCopy</a>(<span class="keywordtype">int</span> index) <span class="keyword">const</span>;
<a name="l00074"></a>00074   <span class="comment">// Constructs and returns an exact copy.</span>
<a name="l00075"></a>00075   <a class="code" href="classtesseract_1_1_training_sample.html">TrainingSample</a>* <a class="code" href="classtesseract_1_1_training_sample.html#a722dac43b2ec92fa0524a6b836fe2b3f">Copy</a>() <span class="keyword">const</span>;
<a name="l00076"></a>00076 
<a name="l00077"></a>00077   <span class="comment">// WARNING! Serialize/DeSerialize do not save/restore the &quot;cache&quot; data</span>
<a name="l00078"></a>00078   <span class="comment">// members, which is mostly the mapped features, and the weight.</span>
<a name="l00079"></a>00079   <span class="comment">// It is assumed these can all be reconstructed from what is saved.</span>
<a name="l00080"></a>00080   <span class="comment">// Writes to the given file. Returns false in case of error.</span>
<a name="l00081"></a>00081   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_training_sample.html#acbc5d9b5d935f7ea2eeaed0163855e8a">Serialize</a>(FILE* fp) <span class="keyword">const</span>;
<a name="l00082"></a>00082   <span class="comment">// Creates from the given file. Returns NULL in case of error.</span>
<a name="l00083"></a>00083   <span class="comment">// If swap is true, assumes a big/little-endian swap is needed.</span>
<a name="l00084"></a>00084   <span class="keyword">static</span> <a class="code" href="classtesseract_1_1_training_sample.html">TrainingSample</a>* <a class="code" href="classtesseract_1_1_training_sample.html#ac1ddd7b77bf29d31b2b36135d6ffd75d">DeSerializeCreate</a>(<span class="keywordtype">bool</span> swap, FILE* fp);
<a name="l00085"></a>00085   <span class="comment">// Reads from the given file. Returns false in case of error.</span>
<a name="l00086"></a>00086   <span class="comment">// If swap is true, assumes a big/little-endian swap is needed.</span>
<a name="l00087"></a>00087   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_training_sample.html#a00b6f4d287ceab08ffc32b4153ef13ba">DeSerialize</a>(<span class="keywordtype">bool</span> swap, FILE* fp);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089   <span class="comment">// Extracts the needed information from the CHAR_DESC_STRUCT.</span>
<a name="l00090"></a>00090   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#af79e693db88d9ef0320a6a2185eabb41">ExtractCharDesc</a>(<span class="keywordtype">int</span> feature_type, <span class="keywordtype">int</span> micro_type,
<a name="l00091"></a>00091                        <span class="keywordtype">int</span> cn_type, <span class="keywordtype">int</span> geo_type,
<a name="l00092"></a>00092                        <a class="code" href="struct_c_h_a_r___d_e_s_c___s_t_r_u_c_t.html">CHAR_DESC_STRUCT</a>* char_desc);
<a name="l00093"></a>00093 
<a name="l00094"></a>00094   <span class="comment">// Sets the mapped_features_ from the features_ using the provided</span>
<a name="l00095"></a>00095   <span class="comment">// feature_space to the indexed versions of the features.</span>
<a name="l00096"></a>00096   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#a7d0162a0f3e054408b21cff893b0d6bf">IndexFeatures</a>(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_int_feature_space.html">IntFeatureSpace</a>&amp; feature_space);
<a name="l00097"></a>00097   <span class="comment">// Sets the mapped_features_ from the features_ using the provided</span>
<a name="l00098"></a>00098   <span class="comment">// feature_map.</span>
<a name="l00099"></a>00099   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#a4cd7b66eb1934688b8fdf2e8a20ac06e">MapFeatures</a>(<span class="keyword">const</span> <a class="code" href="classtesseract_1_1_int_feature_map.html">IntFeatureMap</a>&amp; feature_map);
<a name="l00100"></a>00100 
<a name="l00101"></a>00101   <span class="comment">// Returns a pix representing the sample. (Int features only.)</span>
<a name="l00102"></a>00102   Pix* <a class="code" href="classtesseract_1_1_training_sample.html#a5d26db1b434530f2d73639c5e32989d4">RenderToPix</a>(<span class="keyword">const</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a>* unicharset) <span class="keyword">const</span>;
<a name="l00103"></a>00103   <span class="comment">// Displays the features in the given window with the given color.</span>
<a name="l00104"></a>00104   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#a840b1b4a7c19a1447d543ddc858c974f">DisplayFeatures</a>(<a class="code" href="class_scroll_view.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color, <a class="code" href="class_scroll_view.html">ScrollView</a>* window) <span class="keyword">const</span>;
<a name="l00105"></a>00105 
<a name="l00106"></a>00106   <span class="comment">// Returns a pix of the original sample image. The pix is padded all round</span>
<a name="l00107"></a>00107   <span class="comment">// by padding wherever possible.</span>
<a name="l00108"></a>00108   <span class="comment">// The returned Pix must be pixDestroyed after use.</span>
<a name="l00109"></a>00109   <span class="comment">// If the input page_pix is NULL, NULL is returned.</span>
<a name="l00110"></a>00110   Pix* <a class="code" href="classtesseract_1_1_training_sample.html#a31baec2560471f8a8dfa51a373275160">GetSamplePix</a>(<span class="keywordtype">int</span> padding, Pix* page_pix) <span class="keyword">const</span>;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112   <span class="comment">// Accessors.</span>
<a name="l00113"></a><a class="code" href="classtesseract_1_1_training_sample.html#aa00151c48156e85a61bc11a2b7b2fe02">00113</a>   <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> <a class="code" href="classtesseract_1_1_training_sample.html#aa00151c48156e85a61bc11a2b7b2fe02">class_id</a>()<span class="keyword"> const </span>{
<a name="l00114"></a>00114     <span class="keywordflow">return</span> class_id_;
<a name="l00115"></a>00115   }
<a name="l00116"></a><a class="code" href="classtesseract_1_1_training_sample.html#a7ee7b72a1f7cc9b7255cadadd22dcb40">00116</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#a7ee7b72a1f7cc9b7255cadadd22dcb40">set_class_id</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>) {
<a name="l00117"></a>00117     class_id_ = id;
<a name="l00118"></a>00118   }
<a name="l00119"></a><a class="code" href="classtesseract_1_1_training_sample.html#a7484179f49037aa4ad296eee68022480">00119</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_training_sample.html#a7484179f49037aa4ad296eee68022480">font_id</a>()<span class="keyword"> const </span>{
<a name="l00120"></a>00120     <span class="keywordflow">return</span> font_id_;
<a name="l00121"></a>00121   }
<a name="l00122"></a><a class="code" href="classtesseract_1_1_training_sample.html#a430ac509aa468c0eda381da30cd2044f">00122</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#a430ac509aa468c0eda381da30cd2044f">set_font_id</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>) {
<a name="l00123"></a>00123     font_id_ = id;
<a name="l00124"></a>00124   }
<a name="l00125"></a><a class="code" href="classtesseract_1_1_training_sample.html#af26c8bc49fb28b3020f94e31e82730e8">00125</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_training_sample.html#af26c8bc49fb28b3020f94e31e82730e8">page_num</a>()<span class="keyword"> const </span>{
<a name="l00126"></a>00126     <span class="keywordflow">return</span> page_num_;
<a name="l00127"></a>00127   }
<a name="l00128"></a><a class="code" href="classtesseract_1_1_training_sample.html#a78b2b5006dfd244d94e05a907f248b2a">00128</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#a78b2b5006dfd244d94e05a907f248b2a">set_page_num</a>(<span class="keywordtype">int</span> page) {
<a name="l00129"></a>00129     page_num_ = page;
<a name="l00130"></a>00130   }
<a name="l00131"></a><a class="code" href="classtesseract_1_1_training_sample.html#a42ab271533aecad834d5cac080bf436f">00131</a>   <span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; <a class="code" href="classtesseract_1_1_training_sample.html#a42ab271533aecad834d5cac080bf436f">bounding_box</a>()<span class="keyword"> const </span>{
<a name="l00132"></a>00132     <span class="keywordflow">return</span> bounding_box_;
<a name="l00133"></a>00133   }
<a name="l00134"></a><a class="code" href="classtesseract_1_1_training_sample.html#ac0c0e309ecce8fdbc6c05cb586587907">00134</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#ac0c0e309ecce8fdbc6c05cb586587907">set_bounding_box</a>(<span class="keyword">const</span> <a class="code" href="class_t_b_o_x.html">TBOX</a>&amp; box) {
<a name="l00135"></a>00135     bounding_box_ = box;
<a name="l00136"></a>00136   }
<a name="l00137"></a><a class="code" href="classtesseract_1_1_training_sample.html#af3afdc90346e10f5f4497ea7a89882aa">00137</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_training_sample.html#af3afdc90346e10f5f4497ea7a89882aa">num_features</a>()<span class="keyword"> const </span>{
<a name="l00138"></a>00138     <span class="keywordflow">return</span> num_features_;
<a name="l00139"></a>00139   }
<a name="l00140"></a><a class="code" href="classtesseract_1_1_training_sample.html#a49c3df6faa918fc29a058e6bc434a7c9">00140</a>   <span class="keyword">const</span> <a class="code" href="struct_i_n_t___f_e_a_t_u_r_e___s_t_r_u_c_t.html">INT_FEATURE_STRUCT</a>* <a class="code" href="classtesseract_1_1_training_sample.html#a49c3df6faa918fc29a058e6bc434a7c9">features</a>()<span class="keyword"> const </span>{
<a name="l00141"></a>00141     <span class="keywordflow">return</span> features_;
<a name="l00142"></a>00142   }
<a name="l00143"></a><a class="code" href="classtesseract_1_1_training_sample.html#a4df5318e6847ef10410705f26c51de66">00143</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_training_sample.html#a4df5318e6847ef10410705f26c51de66">num_micro_features</a>()<span class="keyword"> const </span>{
<a name="l00144"></a>00144     <span class="keywordflow">return</span> num_micro_features_;
<a name="l00145"></a>00145   }
<a name="l00146"></a><a class="code" href="classtesseract_1_1_training_sample.html#a7c73dab6b6b2d3557f86fc4fac781bb5">00146</a>   <span class="keyword">const</span> <a class="code" href="mf_8h.html#a29d1eef9328292867329303f9f60c5cb">MicroFeature</a>* <a class="code" href="classtesseract_1_1_training_sample.html#a7c73dab6b6b2d3557f86fc4fac781bb5">micro_features</a>()<span class="keyword"> const </span>{
<a name="l00147"></a>00147     <span class="keywordflow">return</span> micro_features_;
<a name="l00148"></a>00148   }
<a name="l00149"></a><a class="code" href="classtesseract_1_1_training_sample.html#afc65601f115f84c17b064c84a61c10c6">00149</a>   <span class="keywordtype">float</span> <a class="code" href="classtesseract_1_1_training_sample.html#afc65601f115f84c17b064c84a61c10c6">cn_feature</a>(<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{
<a name="l00150"></a>00150     <span class="keywordflow">return</span> cn_feature_[index];
<a name="l00151"></a>00151   }
<a name="l00152"></a><a class="code" href="classtesseract_1_1_training_sample.html#ace21638d002459e1be6486f876f2f097">00152</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_training_sample.html#ace21638d002459e1be6486f876f2f097">geo_feature</a>(<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{
<a name="l00153"></a>00153     <span class="keywordflow">return</span> geo_feature_[index];
<a name="l00154"></a>00154   }
<a name="l00155"></a><a class="code" href="classtesseract_1_1_training_sample.html#a8d7a88cad1df0ad922a25a0fdfc7f40b">00155</a>   <span class="keywordtype">double</span> <a class="code" href="classtesseract_1_1_training_sample.html#a8d7a88cad1df0ad922a25a0fdfc7f40b">weight</a>()<span class="keyword"> const </span>{
<a name="l00156"></a>00156     <span class="keywordflow">return</span> weight_;
<a name="l00157"></a>00157   }
<a name="l00158"></a><a class="code" href="classtesseract_1_1_training_sample.html#a8b80a2463dec89385e2faa6f961b0f56">00158</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#a8b80a2463dec89385e2faa6f961b0f56">set_weight</a>(<span class="keywordtype">double</span> value) {
<a name="l00159"></a>00159     weight_ = value;
<a name="l00160"></a>00160   }
<a name="l00161"></a><a class="code" href="classtesseract_1_1_training_sample.html#a5696fbd8b6cd8bb64a748df0a34687ae">00161</a>   <span class="keywordtype">double</span> <a class="code" href="classtesseract_1_1_training_sample.html#a5696fbd8b6cd8bb64a748df0a34687ae">max_dist</a>()<span class="keyword"> const </span>{
<a name="l00162"></a>00162     <span class="keywordflow">return</span> max_dist_;
<a name="l00163"></a>00163   }
<a name="l00164"></a><a class="code" href="classtesseract_1_1_training_sample.html#a0f0d0090d049f96774bd8b14869abc08">00164</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#a0f0d0090d049f96774bd8b14869abc08">set_max_dist</a>(<span class="keywordtype">double</span> value) {
<a name="l00165"></a>00165     max_dist_ = value;
<a name="l00166"></a>00166   }
<a name="l00167"></a><a class="code" href="classtesseract_1_1_training_sample.html#a27a97084c67306b4d327ef332fb4f9bc">00167</a>   <span class="keywordtype">int</span> <a class="code" href="classtesseract_1_1_training_sample.html#a27a97084c67306b4d327ef332fb4f9bc">sample_index</a>()<span class="keyword"> const </span>{
<a name="l00168"></a>00168     <span class="keywordflow">return</span> sample_index_;
<a name="l00169"></a>00169   }
<a name="l00170"></a><a class="code" href="classtesseract_1_1_training_sample.html#afcf8f6411404ac680958c718c71837dc">00170</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#afcf8f6411404ac680958c718c71837dc">set_sample_index</a>(<span class="keywordtype">int</span> value) {
<a name="l00171"></a>00171     sample_index_ = value;
<a name="l00172"></a>00172   }
<a name="l00173"></a><a class="code" href="classtesseract_1_1_training_sample.html#a8d8f5ab27344a5f901b671b82d75eba2">00173</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_training_sample.html#a8d8f5ab27344a5f901b671b82d75eba2">features_are_mapped</a>()<span class="keyword"> const </span>{
<a name="l00174"></a>00174     <span class="keywordflow">return</span> features_are_mapped_;
<a name="l00175"></a>00175   }
<a name="l00176"></a><a class="code" href="classtesseract_1_1_training_sample.html#aa45f61d6553712990456c95303e56088">00176</a>   <span class="keyword">const</span> <a class="code" href="class_generic_vector.html">GenericVector&lt;int&gt;</a>&amp; <a class="code" href="classtesseract_1_1_training_sample.html#aa45f61d6553712990456c95303e56088">mapped_features</a>()<span class="keyword"> const </span>{
<a name="l00177"></a>00177     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(features_are_mapped_);
<a name="l00178"></a>00178     <span class="keywordflow">return</span> mapped_features_;
<a name="l00179"></a>00179   }
<a name="l00180"></a><a class="code" href="classtesseract_1_1_training_sample.html#ab64d562e5c1e963288698f6299f0ae3c">00180</a>   <span class="keyword">const</span> <a class="code" href="class_generic_vector.html">GenericVector&lt;int&gt;</a>&amp; <a class="code" href="classtesseract_1_1_training_sample.html#ab64d562e5c1e963288698f6299f0ae3c">indexed_features</a>()<span class="keyword"> const </span>{
<a name="l00181"></a>00181     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(features_are_indexed_);
<a name="l00182"></a>00182     <span class="keywordflow">return</span> mapped_features_;
<a name="l00183"></a>00183   }
<a name="l00184"></a><a class="code" href="classtesseract_1_1_training_sample.html#ae7a80094837b6989fae733275f99ef71">00184</a>   <span class="keywordtype">bool</span> <a class="code" href="classtesseract_1_1_training_sample.html#ae7a80094837b6989fae733275f99ef71">is_error</a>()<span class="keyword"> const </span>{
<a name="l00185"></a>00185     <span class="keywordflow">return</span> is_error_;
<a name="l00186"></a>00186   }
<a name="l00187"></a><a class="code" href="classtesseract_1_1_training_sample.html#aa7fd3f7f0341bc78b7cf91c496fc692a">00187</a>   <span class="keywordtype">void</span> <a class="code" href="classtesseract_1_1_training_sample.html#aa7fd3f7f0341bc78b7cf91c496fc692a">set_is_error</a>(<span class="keywordtype">bool</span> value) {
<a name="l00188"></a>00188     is_error_ = value;
<a name="l00189"></a>00189   }
<a name="l00190"></a>00190 
<a name="l00191"></a>00191  <span class="keyword">private</span>:
<a name="l00192"></a>00192   <span class="comment">// Unichar id that this sample represents. There obviously must be a</span>
<a name="l00193"></a>00193   <span class="comment">// reference UNICHARSET somewhere. Usually in TrainingSampleSet.</span>
<a name="l00194"></a>00194   <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> class_id_;
<a name="l00195"></a>00195   <span class="comment">// Font id in which this sample was printed. Refers to a fontinfo_table_ in</span>
<a name="l00196"></a>00196   <span class="comment">// MasterTrainer.</span>
<a name="l00197"></a>00197   <span class="keywordtype">int</span> font_id_;
<a name="l00198"></a>00198   <span class="comment">// Number of page that the sample came from.</span>
<a name="l00199"></a>00199   <span class="keywordtype">int</span> page_num_;
<a name="l00200"></a>00200   <span class="comment">// Bounding box of sample in original image.</span>
<a name="l00201"></a>00201   <a class="code" href="class_t_b_o_x.html">TBOX</a> bounding_box_;
<a name="l00202"></a>00202   <span class="comment">// Number of INT_FEATURE_STRUCT in features_ array.</span>
<a name="l00203"></a>00203   <span class="keywordtype">int</span> num_features_;
<a name="l00204"></a>00204   <span class="comment">// Number of MicroFeature in micro_features_ array.</span>
<a name="l00205"></a>00205   <span class="keywordtype">int</span> num_micro_features_;
<a name="l00206"></a>00206   <span class="comment">// Array of features.</span>
<a name="l00207"></a>00207   <a class="code" href="struct_i_n_t___f_e_a_t_u_r_e___s_t_r_u_c_t.html">INT_FEATURE_STRUCT</a>* features_;
<a name="l00208"></a>00208   <span class="comment">// Array of features.</span>
<a name="l00209"></a>00209   <a class="code" href="mf_8h.html#a29d1eef9328292867329303f9f60c5cb">MicroFeature</a>* micro_features_;
<a name="l00210"></a>00210   <span class="comment">// The one and only CN feature. Indexed by NORM_PARAM_NAME enum.</span>
<a name="l00211"></a>00211   <span class="keywordtype">float</span> cn_feature_[kNumCNParams];
<a name="l00212"></a>00212   <span class="comment">// The one and only geometric feature. (Aims at replacing cn_feature_).</span>
<a name="l00213"></a>00213   <span class="comment">// Indexed by GeoParams enum in picofeat.h</span>
<a name="l00214"></a>00214   <span class="keywordtype">int</span> geo_feature_[<a class="code" href="picofeat_8h.html#a41a4b5a66040b8b2deb004bd33909009af5bbc18811bb7a574c082e4a6f654db7">GeoCount</a>];
<a name="l00215"></a>00215 
<a name="l00216"></a>00216   <span class="comment">// Non-serialized cache data.</span>
<a name="l00217"></a>00217   <span class="comment">// Weight used for boosting training.</span>
<a name="l00218"></a>00218   <span class="keywordtype">double</span> weight_;
<a name="l00219"></a>00219   <span class="comment">// Maximum distance to other samples of same class/font used in computing</span>
<a name="l00220"></a>00220   <span class="comment">// the canonical sample.</span>
<a name="l00221"></a>00221   <span class="keywordtype">double</span> max_dist_;
<a name="l00222"></a>00222   <span class="comment">// Global index of this sample.</span>
<a name="l00223"></a>00223   <span class="keywordtype">int</span> sample_index_;
<a name="l00224"></a>00224   <span class="comment">// Indexed/mapped features, as indicated by the bools below.</span>
<a name="l00225"></a>00225   <a class="code" href="class_generic_vector.html">GenericVector&lt;int&gt;</a> mapped_features_;
<a name="l00226"></a>00226   <span class="keywordtype">bool</span> features_are_indexed_;
<a name="l00227"></a>00227   <span class="keywordtype">bool</span> features_are_mapped_;
<a name="l00228"></a>00228   <span class="comment">// True if the last classification was an error by the current definition.</span>
<a name="l00229"></a>00229   <span class="keywordtype">bool</span> is_error_;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231   <span class="comment">// Randomizing factors.</span>
<a name="l00232"></a>00232   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kYShiftValues[kSampleYShiftSize];
<a name="l00233"></a>00233   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> kScaleValues[kSampleScaleSize];
<a name="l00234"></a>00234 };
<a name="l00235"></a>00235 
<a name="l00236"></a>00236 <a class="code" href="namespacetesseract.html#aad9b817c74cee6bd76a4912e7f54ff7b">ELISTIZEH</a>(TrainingSample)
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 }  <span class="comment">// namespace tesseract</span>
<a name="l00239"></a>00239 
<a name="l00240"></a>00240 <span class="preprocessor">#endif  // TESSERACT_TRAINING_TRAININGSAMPLE_H__</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Feb 2 08:19:20 2012 for Tesseract by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
