<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tesseract: /home/rays/src/opensrc/tesseract-ocr/ccutil/unicharset.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>/home/rays/src/opensrc/tesseract-ocr/ccutil/unicharset.h</h1><a href="unicharset_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">// File:        unicharset.h</span>
<a name="l00003"></a>00003 <span class="comment">// Description: Unicode character/ligature set class.</span>
<a name="l00004"></a>00004 <span class="comment">// Author:      Thomas Kielbus</span>
<a name="l00005"></a>00005 <span class="comment">// Created:     Wed Jun 28 17:05:01 PDT 2006</span>
<a name="l00006"></a>00006 <span class="comment">//</span>
<a name="l00007"></a>00007 <span class="comment">// (C) Copyright 2006, Google Inc.</span>
<a name="l00008"></a>00008 <span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00009"></a>00009 <span class="comment">// you may not use this file except in compliance with the License.</span>
<a name="l00010"></a>00010 <span class="comment">// You may obtain a copy of the License at</span>
<a name="l00011"></a>00011 <span class="comment">// http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00012"></a>00012 <span class="comment">// Unless required by applicable law or agreed to in writing, software</span>
<a name="l00013"></a>00013 <span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00014"></a>00014 <span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00015"></a>00015 <span class="comment">// See the License for the specific language governing permissions and</span>
<a name="l00016"></a>00016 <span class="comment">// limitations under the License.</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00019"></a>00019 <span class="comment"></span>
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef TESSERACT_CCUTIL_UNICHARSET_H__</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define TESSERACT_CCUTIL_UNICHARSET_H__</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;assert.h&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="strngs_8h.html">strngs.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="unichar_8h.html">unichar.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="unicharmap_8h.html">unicharmap.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="params_8h.html">params.h</a>&quot;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a><a class="code" href="unicharset_8h.html#abc3119a959ecd5cffc1d9b9d57479dba">00029</a> <span class="keyword">enum</span> <a class="code" href="unicharset_8h.html#abc3119a959ecd5cffc1d9b9d57479dba">StrongScriptDirection</a> {
<a name="l00030"></a><a class="code" href="unicharset_8h.html#abc3119a959ecd5cffc1d9b9d57479dbaaacc5ec7fd402a8806e78fba831045aae">00030</a>   <a class="code" href="unicharset_8h.html#abc3119a959ecd5cffc1d9b9d57479dbaaacc5ec7fd402a8806e78fba831045aae">DIR_NEUTRAL</a> = 0,        <span class="comment">// Text contains only neutral characters.</span>
<a name="l00031"></a><a class="code" href="unicharset_8h.html#abc3119a959ecd5cffc1d9b9d57479dbaa5978cd698552a6106db1bf6528617317">00031</a>   <a class="code" href="unicharset_8h.html#abc3119a959ecd5cffc1d9b9d57479dbaa5978cd698552a6106db1bf6528617317">DIR_LEFT_TO_RIGHT</a> = 1,  <span class="comment">// Text contains no Right-to-Left characters.</span>
<a name="l00032"></a><a class="code" href="unicharset_8h.html#abc3119a959ecd5cffc1d9b9d57479dbaa3c6da23f98ab8ac48598c21583d9297e">00032</a>   <a class="code" href="unicharset_8h.html#abc3119a959ecd5cffc1d9b9d57479dbaa3c6da23f98ab8ac48598c21583d9297e">DIR_RIGHT_TO_LEFT</a> = 2,  <span class="comment">// Text contains no Left-to-Right characters.</span>
<a name="l00033"></a><a class="code" href="unicharset_8h.html#abc3119a959ecd5cffc1d9b9d57479dbaa252615b6d7ebef9293183f6e94488cc1">00033</a>   <a class="code" href="unicharset_8h.html#abc3119a959ecd5cffc1d9b9d57479dbaa252615b6d7ebef9293183f6e94488cc1">DIR_MIX</a> = 3,            <span class="comment">// Text contains a mixture of left-to-right</span>
<a name="l00034"></a>00034                           <span class="comment">// and right-to-left characters.</span>
<a name="l00035"></a>00035 };
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">00037</a> <span class="keyword">class </span><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> {
<a name="l00038"></a>00038  <span class="keyword">public</span>:
<a name="l00039"></a>00039   <span class="comment">// Minimum number of characters used for fragment representation.</span>
<a name="l00040"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a7f25080aacecf7533fa11ec5d7bf2b15">00040</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a7f25080aacecf7533fa11ec5d7bf2b15">kMinLen</a> = 6;
<a name="l00041"></a>00041   <span class="comment">// Maximum number of characters used for fragment representation.</span>
<a name="l00042"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a1fe86011ab9488980aca8e8e26958b2a">00042</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a1fe86011ab9488980aca8e8e26958b2a">kMaxLen</a> = 3 + <a class="code" href="unichar_8h.html#a902bc40c9d89802bc063afe30ce9e708">UNICHAR_LEN</a> + 2;
<a name="l00043"></a>00043   <span class="comment">// Maximum number of fragments per character.</span>
<a name="l00044"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a44acef42afbd5e03039786e3a3950dcf">00044</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a44acef42afbd5e03039786e3a3950dcf">kMaxChunks</a> = 5;
<a name="l00045"></a>00045 
<a name="l00046"></a>00046   <span class="comment">// Setters and Getters.</span>
<a name="l00047"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#acb20b5f377469c19f37d197ffb9559f8">00047</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#acb20b5f377469c19f37d197ffb9559f8">set_all</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *unichar, <span class="keywordtype">int</span> pos, <span class="keywordtype">int</span> total, <span class="keywordtype">bool</span> natural) {
<a name="l00048"></a>00048     <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a0fc6185e9f688d8f991fe5c196497ce1">set_unichar</a>(unichar);
<a name="l00049"></a>00049     <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a833694ba8fc5e137a2e003034523eae1">set_pos</a>(pos);
<a name="l00050"></a>00050     <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#ae9ada0ccb703fe3c49de6678be319d96">set_total</a>(total);
<a name="l00051"></a>00051     <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a4e25adab433a34a9d6992b1c10ffd6d8">set_natural</a>(natural);
<a name="l00052"></a>00052   }
<a name="l00053"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a0fc6185e9f688d8f991fe5c196497ce1">00053</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a0fc6185e9f688d8f991fe5c196497ce1">set_unichar</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *uch) {
<a name="l00054"></a>00054     strncpy(this-&gt;unichar, uch, <a class="code" href="unichar_8h.html#a902bc40c9d89802bc063afe30ce9e708">UNICHAR_LEN</a>);
<a name="l00055"></a>00055     this-&gt;unichar[<a class="code" href="unichar_8h.html#a902bc40c9d89802bc063afe30ce9e708">UNICHAR_LEN</a>] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00056"></a>00056   }
<a name="l00057"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a833694ba8fc5e137a2e003034523eae1">00057</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a833694ba8fc5e137a2e003034523eae1">set_pos</a>(<span class="keywordtype">int</span> p) { this-&gt;pos = p; }
<a name="l00058"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#ae9ada0ccb703fe3c49de6678be319d96">00058</a>   <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#ae9ada0ccb703fe3c49de6678be319d96">set_total</a>(<span class="keywordtype">int</span> t) { this-&gt;total = t; }
<a name="l00059"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#aabfbe5c558b411ecb3c9a34d0615c2de">00059</a>   <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#aabfbe5c558b411ecb3c9a34d0615c2de">get_unichar</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;unichar; }
<a name="l00060"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a543f738bd883d0417da44a211c6a822b">00060</a>   <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a543f738bd883d0417da44a211c6a822b">get_pos</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;pos; }
<a name="l00061"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#aac1d5e077505363c264144a9348b3f0e">00061</a>   <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#aac1d5e077505363c264144a9348b3f0e">get_total</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;total; }
<a name="l00062"></a>00062 
<a name="l00063"></a>00063   <span class="comment">// Returns the string that represents a fragment</span>
<a name="l00064"></a>00064   <span class="comment">// with the given unichar, pos and total.</span>
<a name="l00065"></a>00065   <span class="keyword">static</span> <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#ab7a7a173907f187f44677d2ad2679e09">to_string</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *unichar, <span class="keywordtype">int</span> pos, <span class="keywordtype">int</span> total,
<a name="l00066"></a>00066                           <span class="keywordtype">bool</span> natural);
<a name="l00067"></a>00067   <span class="comment">// Returns the string that represents this fragment.</span>
<a name="l00068"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#ab7a7a173907f187f44677d2ad2679e09">00068</a>   <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#ab7a7a173907f187f44677d2ad2679e09">to_string</a>()<span class="keyword"> const </span>{
<a name="l00069"></a>00069     <span class="keywordflow">return</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#ab7a7a173907f187f44677d2ad2679e09">to_string</a>(unichar, pos, total, natural);
<a name="l00070"></a>00070   }
<a name="l00071"></a>00071 
<a name="l00072"></a>00072   <span class="comment">// Checks whether a fragment has the same unichar,</span>
<a name="l00073"></a>00073   <span class="comment">// position and total as the given inputs.</span>
<a name="l00074"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a5416dda467e92c5e88a454466c60b980">00074</a>   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a5416dda467e92c5e88a454466c60b980">equals</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *other_unichar,
<a name="l00075"></a>00075                      <span class="keywordtype">int</span> other_pos, <span class="keywordtype">int</span> other_total)<span class="keyword"> const </span>{
<a name="l00076"></a>00076     <span class="keywordflow">return</span> (strcmp(this-&gt;unichar, other_unichar) == 0 &amp;&amp;
<a name="l00077"></a>00077             this-&gt;pos == other_pos &amp;&amp; this-&gt;total == other_total);
<a name="l00078"></a>00078   }
<a name="l00079"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a922cc9843afdb356a29cb308c9956d9c">00079</a>   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a922cc9843afdb356a29cb308c9956d9c">equals</a>(<span class="keyword">const</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> *other)<span class="keyword"> const </span>{
<a name="l00080"></a>00080     <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a5416dda467e92c5e88a454466c60b980">equals</a>(other-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#aabfbe5c558b411ecb3c9a34d0615c2de">get_unichar</a>(),
<a name="l00081"></a>00081                         other-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a543f738bd883d0417da44a211c6a822b">get_pos</a>(),
<a name="l00082"></a>00082                         other-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#aac1d5e077505363c264144a9348b3f0e">get_total</a>());
<a name="l00083"></a>00083   }
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   <span class="comment">// Checks whether a given fragment is a continuation of this fragment.</span>
<a name="l00086"></a>00086   <span class="comment">// Assumes that the given fragment pointer is not NULL.</span>
<a name="l00087"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a1a11643ca234b3a4f1fa52b07fb03350">00087</a>   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a1a11643ca234b3a4f1fa52b07fb03350">is_continuation_of</a>(<span class="keyword">const</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> *fragment)<span class="keyword"> const </span>{
<a name="l00088"></a>00088     <span class="keywordflow">return</span> (strcmp(this-&gt;unichar, fragment-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#aabfbe5c558b411ecb3c9a34d0615c2de">get_unichar</a>()) == 0 &amp;&amp;
<a name="l00089"></a>00089             this-&gt;total == fragment-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#aac1d5e077505363c264144a9348b3f0e">get_total</a>() &amp;&amp;
<a name="l00090"></a>00090             this-&gt;pos == fragment-&gt;<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a543f738bd883d0417da44a211c6a822b">get_pos</a>() + 1);
<a name="l00091"></a>00091   }
<a name="l00092"></a>00092 
<a name="l00093"></a>00093   <span class="comment">// Returns true if this fragment is a beginning fragment.</span>
<a name="l00094"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a42707cfcbf1e9a38ec0333d3202f8d80">00094</a>   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a42707cfcbf1e9a38ec0333d3202f8d80">is_beginning</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;pos == 0; }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096   <span class="comment">// Returns true if this fragment is an ending fragment.</span>
<a name="l00097"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#af222b3b2c71de6199f75e3a7a64aa660">00097</a>   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#af222b3b2c71de6199f75e3a7a64aa660">is_ending</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> this-&gt;pos == this-&gt;total-1; }
<a name="l00098"></a>00098 
<a name="l00099"></a>00099   <span class="comment">// Returns true if the fragment was a separate component to begin with,</span>
<a name="l00100"></a>00100   <span class="comment">// ie did not need chopping to be isolated, but may have been separated</span>
<a name="l00101"></a>00101   <span class="comment">// out from a multi-outline blob.</span>
<a name="l00102"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a3a54d954fd5a60836119fa362fe99289">00102</a>   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a3a54d954fd5a60836119fa362fe99289">is_natural</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> natural; }
<a name="l00103"></a><a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a4e25adab433a34a9d6992b1c10ffd6d8">00103</a>   <span class="keywordtype">void</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#a4e25adab433a34a9d6992b1c10ffd6d8">set_natural</a>(<span class="keywordtype">bool</span> value) { natural = value; }
<a name="l00104"></a>00104 
<a name="l00105"></a>00105   <span class="comment">// Parses the string to see whether it represents a character fragment</span>
<a name="l00106"></a>00106   <span class="comment">// (rather than a regular character). If so, allocates memory for a new</span>
<a name="l00107"></a>00107   <span class="comment">// CHAR_FRAGMENT instance and fills it in with the corresponding fragment</span>
<a name="l00108"></a>00108   <span class="comment">// information. Fragments are of the form:</span>
<a name="l00109"></a>00109   <span class="comment">// |m|1|2, meaning chunk 1 of 2 of character m, or</span>
<a name="l00110"></a>00110   <span class="comment">// |:|1n2, meaning chunk 1 of 2 of character :, and no chopping was needed</span>
<a name="l00111"></a>00111   <span class="comment">// to divide the parts, as they were already separate connected components.</span>
<a name="l00112"></a>00112   <span class="comment">//</span>
<a name="l00113"></a>00113   <span class="comment">// If parsing succeeded returns the pointer to the allocated CHAR_FRAGMENT</span>
<a name="l00114"></a>00114   <span class="comment">// instance, otherwise (if the string does not represent a fragment or it</span>
<a name="l00115"></a>00115   <span class="comment">// looks like it does, but parsing it as a fragment fails) returns NULL.</span>
<a name="l00116"></a>00116   <span class="comment">//</span>
<a name="l00117"></a>00117   <span class="comment">// Note: The caller is responsible for deallocating memory</span>
<a name="l00118"></a>00118   <span class="comment">// associated with the returned pointer.</span>
<a name="l00119"></a>00119   <span class="keyword">static</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> *<a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html#ac56b3d4af146800dd576dd60a11ea563">parse_from_string</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121  <span class="keyword">private</span>:
<a name="l00122"></a>00122   <span class="keywordtype">char</span> unichar[<a class="code" href="unichar_8h.html#a902bc40c9d89802bc063afe30ce9e708">UNICHAR_LEN</a> + 1];
<a name="l00123"></a>00123   <span class="comment">// True if the fragment was a separate component to begin with,</span>
<a name="l00124"></a>00124   <span class="comment">// ie did not need chopping to be isolated, but may have been separated</span>
<a name="l00125"></a>00125   <span class="comment">// out from a multi-outline blob.</span>
<a name="l00126"></a>00126   <span class="keywordtype">bool</span> natural;
<a name="l00127"></a>00127   <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> pos;    <span class="comment">// fragment position in the character</span>
<a name="l00128"></a>00128   <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> total;  <span class="comment">// total number of fragments in the character</span>
<a name="l00129"></a>00129 };
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="comment">// The UNICHARSET class is an utility class for Tesseract that holds the</span>
<a name="l00132"></a>00132 <span class="comment">// set of characters that are used by the engine. Each character is identified</span>
<a name="l00133"></a>00133 <span class="comment">// by a unique number, from 0 to (size - 1).</span>
<a name="l00134"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html">00134</a> <span class="keyword">class </span><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a> {
<a name="l00135"></a>00135  <span class="keyword">public</span>:
<a name="l00136"></a>00136   <span class="comment">// Custom list of characters and their ligature forms (UTF8)</span>
<a name="l00137"></a>00137   <span class="comment">// These map to unicode values in the private use area (PUC) and are supported</span>
<a name="l00138"></a>00138   <span class="comment">// by only few font families (eg. Wyld, Adobe Caslon Pro).</span>
<a name="l00139"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a3fe8d26af62c7e9b98c16e749f6b24ee">00139</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a3fe8d26af62c7e9b98c16e749f6b24ee">kCustomLigatures</a>[][2];
<a name="l00140"></a>00140 
<a name="l00141"></a>00141   <span class="comment">// ICU 2.0 UCharDirection enum (from third_party/icu/include/unicode/uchar.h)</span>
<a name="l00142"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078">00142</a>   <span class="keyword">enum</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078">Direction</a> {
<a name="l00143"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078aea057cec3044e6ec313ffc0c0d85e0db">00143</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078aea057cec3044e6ec313ffc0c0d85e0db">U_LEFT_TO_RIGHT</a>               = 0,
<a name="l00144"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078ac979da8ecbc0d158b8cb516db7e3824d">00144</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078ac979da8ecbc0d158b8cb516db7e3824d">U_RIGHT_TO_LEFT</a>               = 1,
<a name="l00145"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078aaf5dc95f557dbfbbf3a517e8b93d9a01">00145</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078aaf5dc95f557dbfbbf3a517e8b93d9a01">U_EUROPEAN_NUMBER</a>             = 2,
<a name="l00146"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a65341629a233d9f3003c110dff857f4b">00146</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a65341629a233d9f3003c110dff857f4b">U_EUROPEAN_NUMBER_SEPARATOR</a>   = 3,
<a name="l00147"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a5f07604e909b46b5dc1920be0bbc7a88">00147</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a5f07604e909b46b5dc1920be0bbc7a88">U_EUROPEAN_NUMBER_TERMINATOR</a>  = 4,
<a name="l00148"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a2603bff7a0466ebbb5b9b9abd5a485e5">00148</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a2603bff7a0466ebbb5b9b9abd5a485e5">U_ARABIC_NUMBER</a>               = 5,
<a name="l00149"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a409ccbace5eab0702c2f3c6eb948742b">00149</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a409ccbace5eab0702c2f3c6eb948742b">U_COMMON_NUMBER_SEPARATOR</a>     = 6,
<a name="l00150"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a942da3ff418d111d9bd9c20177f35395">00150</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a942da3ff418d111d9bd9c20177f35395">U_BLOCK_SEPARATOR</a>             = 7,
<a name="l00151"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a12e93d6107afaa2078d4526a993a823f">00151</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a12e93d6107afaa2078d4526a993a823f">U_SEGMENT_SEPARATOR</a>           = 8,
<a name="l00152"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a4573999aed34b8da020ee296a7d5d1b6">00152</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a4573999aed34b8da020ee296a7d5d1b6">U_WHITE_SPACE_NEUTRAL</a>         = 9,
<a name="l00153"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a5a183c9262a1161b5d34cf3d7c950cac">00153</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a5a183c9262a1161b5d34cf3d7c950cac">U_OTHER_NEUTRAL</a>               = 10,
<a name="l00154"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078adaaa5dc98724c6be152ec1dffc1bbcde">00154</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078adaaa5dc98724c6be152ec1dffc1bbcde">U_LEFT_TO_RIGHT_EMBEDDING</a>     = 11,
<a name="l00155"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078ae49c3ef95b410efddf065bfc9aec0059">00155</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078ae49c3ef95b410efddf065bfc9aec0059">U_LEFT_TO_RIGHT_OVERRIDE</a>      = 12,
<a name="l00156"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078ac6664fbc7421c2ed788911b3f1ba56c8">00156</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078ac6664fbc7421c2ed788911b3f1ba56c8">U_RIGHT_TO_LEFT_ARABIC</a>        = 13,
<a name="l00157"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a64137417f8b4c99799705fe2a250adcd">00157</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a64137417f8b4c99799705fe2a250adcd">U_RIGHT_TO_LEFT_EMBEDDING</a>     = 14,
<a name="l00158"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078af7ae1a83d0277df72f107ce2f3a413fa">00158</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078af7ae1a83d0277df72f107ce2f3a413fa">U_RIGHT_TO_LEFT_OVERRIDE</a>      = 15,
<a name="l00159"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a42546c5b99ac6116cde718bdb0160ddc">00159</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a42546c5b99ac6116cde718bdb0160ddc">U_POP_DIRECTIONAL_FORMAT</a>      = 16,
<a name="l00160"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078af735a8eeb080a833d4885303d8198ec8">00160</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078af735a8eeb080a833d4885303d8198ec8">U_DIR_NON_SPACING_MARK</a>        = 17,
<a name="l00161"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a0b49c52166a6b1bab9ec449d47577a79">00161</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a0b49c52166a6b1bab9ec449d47577a79">U_BOUNDARY_NEUTRAL</a>            = 18,
<a name="l00162"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a767e6b85ea78e00f48b1b41058041803">00162</a>       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a767e6b85ea78e00f48b1b41058041803">U_CHAR_DIRECTION_COUNT</a>
<a name="l00163"></a>00163   };
<a name="l00164"></a>00164 
<a name="l00165"></a>00165   <span class="comment">// Create an empty UNICHARSET</span>
<a name="l00166"></a>00166   <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa422e2b9b4b6e17ac52ac25d88d295db">UNICHARSET</a>();
<a name="l00167"></a>00167 
<a name="l00168"></a>00168   <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a6b6b33beb6b71f68e56f7f71d29920dc">~UNICHARSET</a>();
<a name="l00169"></a>00169 
<a name="l00170"></a>00170   <span class="comment">// Return the UNICHAR_ID of a given unichar representation within the</span>
<a name="l00171"></a>00171   <span class="comment">// UNICHARSET.</span>
<a name="l00172"></a>00172   <span class="keyword">const</span> <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr) <span class="keyword">const</span>;
<a name="l00173"></a>00173 
<a name="l00174"></a>00174   <span class="comment">// Return the UNICHAR_ID of a given unichar representation within the</span>
<a name="l00175"></a>00175   <span class="comment">// UNICHARSET. Only the first length characters from unichar_repr are used.</span>
<a name="l00176"></a>00176   <span class="keyword">const</span> <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr,
<a name="l00177"></a>00177                                  <span class="keywordtype">int</span> length) <span class="keyword">const</span>;
<a name="l00178"></a>00178 
<a name="l00179"></a>00179   <span class="comment">// Return the minimum number of bytes that matches a legal UNICHAR_ID,</span>
<a name="l00180"></a>00180   <span class="comment">// while leaving a legal UNICHAR_ID afterwards. In other words, if there</span>
<a name="l00181"></a>00181   <span class="comment">// is both a short and a long match to the string, return the length that</span>
<a name="l00182"></a>00182   <span class="comment">// ensures there is a legal match after it.</span>
<a name="l00183"></a>00183   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ab18a1f069bcb107a7b316520d23fb57c">step</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* str) <span class="keyword">const</span>;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185   <span class="comment">// Return whether the given UTF-8 string is encodable with this UNICHARSET.</span>
<a name="l00186"></a>00186   <span class="comment">// If not encodable, write the first byte offset which cannot be converted</span>
<a name="l00187"></a>00187   <span class="comment">// into the second (return) argument.</span>
<a name="l00188"></a>00188   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a139844c724c4bae5e66ef4b9e8716740">encodable_string</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">int</span> *first_bad_position) <span class="keyword">const</span>;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190   <span class="comment">// Return the unichar representation corresponding to the given UNICHAR_ID</span>
<a name="l00191"></a>00191   <span class="comment">// within the UNICHARSET.</span>
<a name="l00192"></a>00192   <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> <span class="keywordtype">id</span>) <span class="keyword">const</span>;
<a name="l00193"></a>00193 
<a name="l00194"></a>00194   <span class="comment">// Return the UTF8 representation corresponding to the given UNICHAR_ID after</span>
<a name="l00195"></a>00195   <span class="comment">// resolving any private encodings internal to Tesseract. This method is</span>
<a name="l00196"></a>00196   <span class="comment">// preferrable to id_to_unichar for outputting text that will be visible to</span>
<a name="l00197"></a>00197   <span class="comment">// external applications.</span>
<a name="l00198"></a>00198   <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a841e2c7277329f307c9ae8462ddc3ecf">id_to_unichar_ext</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> <span class="keywordtype">id</span>) <span class="keyword">const</span>;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200   <span class="comment">// Return a STRING that reformats the utf8 str into the str followed</span>
<a name="l00201"></a>00201   <span class="comment">// by its hex unicodes.</span>
<a name="l00202"></a>00202   <span class="keyword">static</span> <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af4928980ffba37074f8c1a6d20518730">debug_utf8_str</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* str);
<a name="l00203"></a>00203 
<a name="l00204"></a>00204   <span class="comment">// Return a STRING containing debug information on the unichar, including</span>
<a name="l00205"></a>00205   <span class="comment">// the id_to_unichar, its hex unicodes and the properties.</span>
<a name="l00206"></a>00206   <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a2543f3cb2b8da0160a87088940cc58d2">debug_str</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> <span class="keywordtype">id</span>) <span class="keyword">const</span>;
<a name="l00207"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a0827e4c58f9599955d986bee279027e0">00207</a>   <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a0827e4c58f9599955d986bee279027e0">debug_str</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * unichar_repr)<span class="keyword"> const </span>{
<a name="l00208"></a>00208     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a2543f3cb2b8da0160a87088940cc58d2">debug_str</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr));
<a name="l00209"></a>00209   }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211   <span class="comment">// Add a unichar representation to the set.</span>
<a name="l00212"></a>00212   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ab5198816dde686850da3530a1f8261fe">unichar_insert</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr);
<a name="l00213"></a>00213 
<a name="l00214"></a>00214   <span class="comment">// Return true if the given unichar id exists within the set.</span>
<a name="l00215"></a>00215   <span class="comment">// Relies on the fact that unichar ids are contiguous in the unicharset.</span>
<a name="l00216"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">00216</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00217"></a>00217     <span class="keywordflow">return</span> unichar_id != INVALID_UNICHAR_ID &amp;&amp; unichar_id &lt; size_used &amp;&amp;
<a name="l00218"></a>00218         unichar_id &gt;= 0;
<a name="l00219"></a>00219   }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221   <span class="comment">// Return true if the given unichar representation exists within the set.</span>
<a name="l00222"></a>00222   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a9f8861ffb917e7341c821928da5865f0">contains_unichar</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr) <span class="keyword">const</span>;
<a name="l00223"></a>00223   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a9f8861ffb917e7341c821928da5865f0">contains_unichar</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr, <span class="keywordtype">int</span> length) <span class="keyword">const</span>;
<a name="l00224"></a>00224 
<a name="l00225"></a>00225   <span class="comment">// Return true if the given unichar representation corresponds to the given</span>
<a name="l00226"></a>00226   <span class="comment">// UNICHAR_ID within the set.</span>
<a name="l00227"></a>00227   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa0838c2b6fafdc34416794b6afe698f8">eq</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr) <span class="keyword">const</span>;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229   <span class="comment">// Delete CHAR_FRAGMENTs stored in properties of unichars array.</span>
<a name="l00230"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a75a347ebcd7fb83bd64e082e0b2b4d8c">00230</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a75a347ebcd7fb83bd64e082e0b2b4d8c">delete_pointers_in_unichars</a>() {
<a name="l00231"></a>00231     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size_used; ++i) {
<a name="l00232"></a>00232       <span class="keywordflow">if</span> (unichars[i].properties.fragment != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00233"></a>00233         <span class="keyword">delete</span> unichars[i].properties.fragment;
<a name="l00234"></a>00234         unichars[i].properties.fragment = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00235"></a>00235       }
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237   }
<a name="l00238"></a>00238 
<a name="l00239"></a>00239   <span class="comment">// Clear the UNICHARSET (all the previous data is lost).</span>
<a name="l00240"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ad9060160cd52065e89cbc8927454f525">00240</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ad9060160cd52065e89cbc8927454f525">clear</a>() {
<a name="l00241"></a>00241     <span class="keywordflow">if</span> (script_table != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00242"></a>00242       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; script_table_size_used; ++i)
<a name="l00243"></a>00243         <span class="keyword">delete</span>[] script_table[i];
<a name="l00244"></a>00244       <span class="keyword">delete</span>[] script_table;
<a name="l00245"></a>00245       script_table = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00246"></a>00246       script_table_size_used = 0;
<a name="l00247"></a>00247     }
<a name="l00248"></a>00248     <span class="keywordflow">if</span> (unichars != <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00249"></a>00249       <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a75a347ebcd7fb83bd64e082e0b2b4d8c">delete_pointers_in_unichars</a>();
<a name="l00250"></a>00250       <span class="keyword">delete</span>[] unichars;
<a name="l00251"></a>00251       unichars = <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00252"></a>00252     }
<a name="l00253"></a>00253     script_table_size_reserved = 0;
<a name="l00254"></a>00254     size_reserved = 0;
<a name="l00255"></a>00255     size_used = 0;
<a name="l00256"></a>00256     ids.<a class="code" href="class_u_n_i_c_h_a_r_m_a_p.html#a03d0b5a94f3b73fb17183e4bbf6a90d4">clear</a>();
<a name="l00257"></a>00257     top_bottom_set_ = <span class="keyword">false</span>;
<a name="l00258"></a>00258     script_has_upper_lower_ = <span class="keyword">false</span>;
<a name="l00259"></a>00259     script_has_xheight_ = <span class="keyword">false</span>;
<a name="l00260"></a>00260     null_sid_ = 0;
<a name="l00261"></a>00261     common_sid_ = 0;
<a name="l00262"></a>00262     latin_sid_ = 0;
<a name="l00263"></a>00263     cyrillic_sid_ = 0;
<a name="l00264"></a>00264     greek_sid_ = 0;
<a name="l00265"></a>00265     han_sid_ = 0;
<a name="l00266"></a>00266     hiragana_sid_ = 0;
<a name="l00267"></a>00267     katakana_sid_ = 0;
<a name="l00268"></a>00268   }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270   <span class="comment">// Return the size of the set (the number of different UNICHAR it holds).</span>
<a name="l00271"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa3e8073ebaf3e0022654c45f27135032">00271</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa3e8073ebaf3e0022654c45f27135032">size</a>()<span class="keyword"> const </span>{
<a name="l00272"></a>00272     <span class="keywordflow">return</span> size_used;
<a name="l00273"></a>00273   }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275   <span class="comment">// Reserve enough memory space for the given number of UNICHARS</span>
<a name="l00276"></a>00276   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a33b72579a4aabe9b2953e5cf2a18a5a6">reserve</a>(<span class="keywordtype">int</span> unichars_number);
<a name="l00277"></a>00277 
<a name="l00278"></a>00278   <span class="comment">// Opens the file indicated by filename and saves unicharset to that file.</span>
<a name="l00279"></a>00279   <span class="comment">// Returns true if the operation is successful.</span>
<a name="l00280"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a1f82a51ad2d63d499a625b97ec806811">00280</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a1f82a51ad2d63d499a625b97ec806811">save_to_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> filename)<span class="keyword"> const </span>{
<a name="l00281"></a>00281     FILE* file = fopen(filename, <span class="stringliteral">&quot;w+b&quot;</span>);
<a name="l00282"></a>00282     <span class="keywordflow">if</span> (file == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00283"></a>00283     <span class="keywordtype">bool</span> result = <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a1f82a51ad2d63d499a625b97ec806811">save_to_file</a>(file);
<a name="l00284"></a>00284     fclose(file);
<a name="l00285"></a>00285     <span class="keywordflow">return</span> result;
<a name="l00286"></a>00286   }
<a name="l00287"></a>00287 
<a name="l00288"></a>00288   <span class="comment">// Saves the content of the UNICHARSET to the given file.</span>
<a name="l00289"></a>00289   <span class="comment">// Returns true if the operation is successful.</span>
<a name="l00290"></a>00290   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a1f82a51ad2d63d499a625b97ec806811">save_to_file</a>(FILE *file) <span class="keyword">const</span>;
<a name="l00291"></a>00291 
<a name="l00292"></a>00292   <span class="comment">// Load a unicharset from a unicharset file that has been loaded into</span>
<a name="l00293"></a>00293   <span class="comment">// the given memory buffer.</span>
<a name="l00294"></a>00294   <span class="comment">// Returns true if the operation is successful.</span>
<a name="l00295"></a>00295   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a34e243b3b1434e2774ffae7c1f557e64">load_from_inmemory_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> memory, <span class="keywordtype">int</span> mem_size,
<a name="l00296"></a>00296                                <span class="keywordtype">bool</span> skip_fragments);
<a name="l00297"></a>00297   <span class="comment">// Returns true if the operation is successful.</span>
<a name="l00298"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a0c39b6a6028f29531c75a4b7288acbd4">00298</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a0c39b6a6028f29531c75a4b7288acbd4">load_from_inmemory_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> memory, <span class="keywordtype">int</span> mem_size) {
<a name="l00299"></a>00299     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a34e243b3b1434e2774ffae7c1f557e64">load_from_inmemory_file</a>(memory, mem_size, <span class="keyword">false</span>);
<a name="l00300"></a>00300   }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302   <span class="comment">// Opens the file indicated by filename and loads the UNICHARSET</span>
<a name="l00303"></a>00303   <span class="comment">// from the given file. The previous data is lost.</span>
<a name="l00304"></a>00304   <span class="comment">// Returns true if the operation is successful.</span>
<a name="l00305"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af066ba55fdc20f996eaaed05618b377e">00305</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af066ba55fdc20f996eaaed05618b377e">load_from_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> filename, <span class="keywordtype">bool</span> skip_fragments) {
<a name="l00306"></a>00306     FILE* file = fopen(filename, <span class="stringliteral">&quot;rb&quot;</span>);
<a name="l00307"></a>00307     <span class="keywordflow">if</span> (file == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00308"></a>00308     <span class="keywordtype">bool</span> result = <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af066ba55fdc20f996eaaed05618b377e">load_from_file</a>(file, skip_fragments);
<a name="l00309"></a>00309     fclose(file);
<a name="l00310"></a>00310     <span class="keywordflow">return</span> result;
<a name="l00311"></a>00311   }
<a name="l00312"></a>00312   <span class="comment">// returns true if the operation is successful.</span>
<a name="l00313"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ab35988d3b9b68bdfeb575845da6d8094">00313</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ab35988d3b9b68bdfeb575845da6d8094">load_from_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> filename) {
<a name="l00314"></a>00314     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af066ba55fdc20f996eaaed05618b377e">load_from_file</a>(filename, <span class="keyword">false</span>);
<a name="l00315"></a>00315   }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317   <span class="comment">// Loads the UNICHARSET from the given file. The previous data is lost.</span>
<a name="l00318"></a>00318   <span class="comment">// Returns true if the operation is successful.</span>
<a name="l00319"></a>00319   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af066ba55fdc20f996eaaed05618b377e">load_from_file</a>(FILE *file, <span class="keywordtype">bool</span> skip_fragments);
<a name="l00320"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7e27b0eba4eb0c2bc54a9f722f5c6f24">00320</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7e27b0eba4eb0c2bc54a9f722f5c6f24">load_from_file</a>(FILE *file) { <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7e27b0eba4eb0c2bc54a9f722f5c6f24">load_from_file</a>(file, <span class="keyword">false</span>); }
<a name="l00321"></a>00321 
<a name="l00322"></a>00322   <span class="comment">// Sets up internal data after loading the file, based on the char</span>
<a name="l00323"></a>00323   <span class="comment">// properties. Called from load_from_file, but also needs to be run</span>
<a name="l00324"></a>00324   <span class="comment">// during set_unicharset_properties.</span>
<a name="l00325"></a>00325   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ac704da42f758626cf6d24491b5ffb3e5">post_load_setup</a>();
<a name="l00326"></a>00326 
<a name="l00327"></a>00327   <span class="comment">// Returns true if right_to_left scripts are significant in the unicharset,</span>
<a name="l00328"></a>00328   <span class="comment">// but without being so sensitive that &quot;universal&quot; unicharsets containing</span>
<a name="l00329"></a>00329   <span class="comment">// characters from many scripts, like orientation and script detection,</span>
<a name="l00330"></a>00330   <span class="comment">// look like they are right_to_left.</span>
<a name="l00331"></a>00331   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8bf761158c6ff3c36148861cb8417b91">major_right_to_left</a>() <span class="keyword">const</span>;
<a name="l00332"></a>00332 
<a name="l00333"></a>00333   <span class="comment">// Set a whitelist and/or blacklist of characters to recognize.</span>
<a name="l00334"></a>00334   <span class="comment">// An empty or NULL whitelist enables everything (minus any blacklist).</span>
<a name="l00335"></a>00335   <span class="comment">// An empty or NULL blacklist disables nothing.</span>
<a name="l00336"></a>00336   <span class="comment">// The blacklist overrides the whitelist.</span>
<a name="l00337"></a>00337   <span class="comment">// Each list is a string of utf8 character strings. Boundaries between</span>
<a name="l00338"></a>00338   <span class="comment">// unicharset units are worked out automatically, and characters not in</span>
<a name="l00339"></a>00339   <span class="comment">// the unicharset are silently ignored.</span>
<a name="l00340"></a>00340   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a526526e8b41e18098d8dd0faafda8fd3">set_black_and_whitelist</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* blacklist, <span class="keyword">const</span> <span class="keywordtype">char</span>* whitelist);
<a name="l00341"></a>00341 
<a name="l00342"></a>00342   <span class="comment">// Set the isalpha property of the given unichar to the given value.</span>
<a name="l00343"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a345a8e1c310d76ab054693a615e01df1">00343</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a345a8e1c310d76ab054693a615e01df1">set_isalpha</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <span class="keywordtype">bool</span> value) {
<a name="l00344"></a>00344     unichars[unichar_id].properties.isalpha = value;
<a name="l00345"></a>00345   }
<a name="l00346"></a>00346 
<a name="l00347"></a>00347   <span class="comment">// Set the islower property of the given unichar to the given value.</span>
<a name="l00348"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a9fbe72d0f7a00e1145a663b9e8b8a297">00348</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a9fbe72d0f7a00e1145a663b9e8b8a297">set_islower</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <span class="keywordtype">bool</span> value) {
<a name="l00349"></a>00349     unichars[unichar_id].properties.islower = value;
<a name="l00350"></a>00350   }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352   <span class="comment">// Set the isupper property of the given unichar to the given value.</span>
<a name="l00353"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8fc89717f817046f011380fcbd59566d">00353</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8fc89717f817046f011380fcbd59566d">set_isupper</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <span class="keywordtype">bool</span> value) {
<a name="l00354"></a>00354     unichars[unichar_id].properties.isupper = value;
<a name="l00355"></a>00355   }
<a name="l00356"></a>00356 
<a name="l00357"></a>00357   <span class="comment">// Set the isdigit property of the given unichar to the given value.</span>
<a name="l00358"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7137b0679c03e0c5ac2c350470f7c443">00358</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7137b0679c03e0c5ac2c350470f7c443">set_isdigit</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <span class="keywordtype">bool</span> value) {
<a name="l00359"></a>00359     unichars[unichar_id].properties.isdigit = value;
<a name="l00360"></a>00360   }
<a name="l00361"></a>00361 
<a name="l00362"></a>00362   <span class="comment">// Set the ispunctuation property of the given unichar to the given value.</span>
<a name="l00363"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a288ea711359f8c5bd0e7c7369a63b27b">00363</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a288ea711359f8c5bd0e7c7369a63b27b">set_ispunctuation</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <span class="keywordtype">bool</span> value) {
<a name="l00364"></a>00364     unichars[unichar_id].properties.ispunctuation = value;
<a name="l00365"></a>00365   }
<a name="l00366"></a>00366 
<a name="l00367"></a>00367   <span class="comment">// Set the isngram property of the given unichar to the given value.</span>
<a name="l00368"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a13e0ac21ee98a761c7d4af0e1f695957">00368</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a13e0ac21ee98a761c7d4af0e1f695957">set_isngram</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <span class="keywordtype">bool</span> value) {
<a name="l00369"></a>00369     unichars[unichar_id].properties.isngram = value;
<a name="l00370"></a>00370   }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372   <span class="comment">// Set the script name of the given unichar to the given value.</span>
<a name="l00373"></a>00373   <span class="comment">// Value is copied and thus can be a temporary;</span>
<a name="l00374"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a825be92d5127eb24f6be6c9758e5ba4f">00374</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a825be92d5127eb24f6be6c9758e5ba4f">set_script</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <span class="keyword">const</span> <span class="keywordtype">char</span>* value) {
<a name="l00375"></a>00375     unichars[unichar_id].properties.script_id = <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7cbfd800fe71082f0e7d58b7c25330bb">add_script</a>(value);
<a name="l00376"></a>00376   }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378   <span class="comment">// Set other_case unichar id in the properties for the given unichar id.</span>
<a name="l00379"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a71f4bab94d9bc56d828c67fb64364c41">00379</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a71f4bab94d9bc56d828c67fb64364c41">set_other_case</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> other_case) {
<a name="l00380"></a>00380     unichars[unichar_id].properties.other_case = other_case;
<a name="l00381"></a>00381   }
<a name="l00382"></a>00382 
<a name="l00383"></a>00383   <span class="comment">// Set the direction property of the given unichar to the given value.</span>
<a name="l00384"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7c191fe85cb17776f4174d0f33dfb9b8">00384</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7c191fe85cb17776f4174d0f33dfb9b8">set_direction</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078">UNICHARSET::Direction</a> value) {
<a name="l00385"></a>00385     unichars[unichar_id].properties.direction = value;
<a name="l00386"></a>00386   }
<a name="l00387"></a>00387 
<a name="l00388"></a>00388   <span class="comment">// Set mirror unichar id in the properties for the given unichar id.</span>
<a name="l00389"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a2c911ef9a47dc455f3b7c18a2940d5e3">00389</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a2c911ef9a47dc455f3b7c18a2940d5e3">set_mirror</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> mirror) {
<a name="l00390"></a>00390     unichars[unichar_id].properties.mirror = mirror;
<a name="l00391"></a>00391   }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393   <span class="comment">// Record normalized version of unichar with the given unichar_id.</span>
<a name="l00394"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7a511c09c29cbbb292a10962ebf63096">00394</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7a511c09c29cbbb292a10962ebf63096">set_normed</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <span class="keyword">const</span> <span class="keywordtype">char</span>* normed) {
<a name="l00395"></a>00395     unichars[unichar_id].properties.normed = normed;
<a name="l00396"></a>00396   }
<a name="l00397"></a>00397 
<a name="l00398"></a>00398   <span class="comment">// Return the isalpha property of the given unichar.</span>
<a name="l00399"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ad1dd0929edfb0e9e4905cc2fbeff42c2">00399</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ad1dd0929edfb0e9e4905cc2fbeff42c2">get_isalpha</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00400"></a>00400     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00401"></a>00401     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00402"></a>00402     <span class="keywordflow">return</span> unichars[unichar_id].properties.isalpha;
<a name="l00403"></a>00403   }
<a name="l00404"></a>00404 
<a name="l00405"></a>00405   <span class="comment">// Return the islower property of the given unichar.</span>
<a name="l00406"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a074096c823dd5b9bc02c02a59784bf34">00406</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a074096c823dd5b9bc02c02a59784bf34">get_islower</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00407"></a>00407     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00408"></a>00408     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00409"></a>00409     <span class="keywordflow">return</span> unichars[unichar_id].properties.islower;
<a name="l00410"></a>00410   }
<a name="l00411"></a>00411 
<a name="l00412"></a>00412   <span class="comment">// Return the isupper property of the given unichar.</span>
<a name="l00413"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a482a94b3e6fcd4e5b9b9363bb9e0ee59">00413</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a482a94b3e6fcd4e5b9b9363bb9e0ee59">get_isupper</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00414"></a>00414     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00415"></a>00415     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00416"></a>00416     <span class="keywordflow">return</span> unichars[unichar_id].properties.isupper;
<a name="l00417"></a>00417   }
<a name="l00418"></a>00418 
<a name="l00419"></a>00419   <span class="comment">// Return the isdigit property of the given unichar.</span>
<a name="l00420"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a5951dde3ab90c12c309d776570a10725">00420</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a5951dde3ab90c12c309d776570a10725">get_isdigit</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00421"></a>00421     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00422"></a>00422     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00423"></a>00423     <span class="keywordflow">return</span> unichars[unichar_id].properties.isdigit;
<a name="l00424"></a>00424   }
<a name="l00425"></a>00425 
<a name="l00426"></a>00426   <span class="comment">// Return the ispunctuation property of the given unichar.</span>
<a name="l00427"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a57f82c4777d39c923cb9ec27cac9bcb6">00427</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a57f82c4777d39c923cb9ec27cac9bcb6">get_ispunctuation</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00428"></a>00428     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00429"></a>00429     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00430"></a>00430     <span class="keywordflow">return</span> unichars[unichar_id].properties.ispunctuation;
<a name="l00431"></a>00431   }
<a name="l00432"></a>00432 
<a name="l00433"></a>00433   <span class="comment">// Return the isngram property of the given unichar.</span>
<a name="l00434"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a5c4c10b49cde94f3c12cd74996faad07">00434</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a5c4c10b49cde94f3c12cd74996faad07">get_isngram</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00435"></a>00435     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00436"></a>00436     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00437"></a>00437     <span class="keywordflow">return</span> unichars[unichar_id].properties.isngram;
<a name="l00438"></a>00438   }
<a name="l00439"></a>00439 
<a name="l00440"></a>00440   <span class="comment">// Returns whether the unichar id represents a unicode value in the private</span>
<a name="l00441"></a>00441   <span class="comment">// use area.</span>
<a name="l00442"></a>00442   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ab5afe9b20cc4fe437ab3bf25b5d42298">get_isprivate</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id) <span class="keyword">const</span>;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444   <span class="comment">// Returns true if the ids have useful min/max top/bottom values.</span>
<a name="l00445"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ad07c5acc2cc8677aba3edcac43e0cb1e">00445</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ad07c5acc2cc8677aba3edcac43e0cb1e">top_bottom_useful</a>()<span class="keyword"> const </span>{
<a name="l00446"></a>00446     <span class="keywordflow">return</span> top_bottom_set_;
<a name="l00447"></a>00447   }
<a name="l00448"></a>00448   <span class="comment">// Sets all ranges to empty, so they can be expanded to set the values.</span>
<a name="l00449"></a>00449   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a4375f71f6c15c6837453d76db520d53f">set_ranges_empty</a>();
<a name="l00450"></a>00450   <span class="comment">// Sets all the properties for this unicharset given a src_unicharset with</span>
<a name="l00451"></a>00451   <span class="comment">// everything set. The unicharsets don&#39;t have to be the same, and graphemes</span>
<a name="l00452"></a>00452   <span class="comment">// are correctly accounted for.</span>
<a name="l00453"></a>00453   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a50807d5e6c3fb53d168ea698a21f47af">SetPropertiesFromOther</a>(<span class="keyword">const</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a>&amp; src);
<a name="l00454"></a>00454   <span class="comment">// Expands the tops and bottoms and widths for this unicharset given a</span>
<a name="l00455"></a>00455   <span class="comment">// src_unicharset with ranges in it. The unicharsets don&#39;t have to be the</span>
<a name="l00456"></a>00456   <span class="comment">// same, and graphemes are correctly accounted for.</span>
<a name="l00457"></a>00457   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a182050c549dfc1277ac6b655303bb92d">ExpandRangesFromOther</a>(<span class="keyword">const</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a>&amp; src);
<a name="l00458"></a>00458   <span class="comment">// For each id in src, if it does not occur in this, add it, as in</span>
<a name="l00459"></a>00459   <span class="comment">// SetPropertiesFromOther, otherwise expand the ranges, as in</span>
<a name="l00460"></a>00460   <span class="comment">// ExpandRangesFromOther.</span>
<a name="l00461"></a>00461   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa7d69d3734c1dd18f8dd9faf34b1de28">AppendOtherUnicharset</a>(<span class="keyword">const</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html">UNICHARSET</a>&amp; src);
<a name="l00462"></a>00462   <span class="comment">// Returns the min and max bottom and top of the given unichar in</span>
<a name="l00463"></a>00463   <span class="comment">// baseline-normalized coordinates, ie, where the baseline is</span>
<a name="l00464"></a>00464   <span class="comment">// kBlnBaselineOffset and the meanline is kBlnBaselineOffset + kBlnXHeight</span>
<a name="l00465"></a>00465   <span class="comment">// (See normalis.h for the definitions).</span>
<a name="l00466"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af2e0d12e80aa3aa985652d73eaf1e95f">00466</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af2e0d12e80aa3aa985652d73eaf1e95f">get_top_bottom</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id,
<a name="l00467"></a>00467                       <span class="keywordtype">int</span>* min_bottom, <span class="keywordtype">int</span>* max_bottom,
<a name="l00468"></a>00468                       <span class="keywordtype">int</span>* min_top, <span class="keywordtype">int</span>* max_top)<span class="keyword"> const </span>{
<a name="l00469"></a>00469     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) {
<a name="l00470"></a>00470       *min_bottom = *min_top = 0;
<a name="l00471"></a>00471       *max_bottom = *max_top = 256;  <span class="comment">// kBlnCellHeight</span>
<a name="l00472"></a>00472       <span class="keywordflow">return</span>;
<a name="l00473"></a>00473     }
<a name="l00474"></a>00474     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00475"></a>00475     *min_bottom = unichars[unichar_id].properties.min_bottom;
<a name="l00476"></a>00476     *max_bottom = unichars[unichar_id].properties.max_bottom;
<a name="l00477"></a>00477     *min_top = unichars[unichar_id].properties.min_top;
<a name="l00478"></a>00478     *max_top = unichars[unichar_id].properties.max_top;
<a name="l00479"></a>00479   }
<a name="l00480"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a6960c3b1ab2f43b1fce0e3b2ba7f76ce">00480</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a6960c3b1ab2f43b1fce0e3b2ba7f76ce">set_top_bottom</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id,
<a name="l00481"></a>00481                       <span class="keywordtype">int</span> min_bottom, <span class="keywordtype">int</span> max_bottom,
<a name="l00482"></a>00482                       <span class="keywordtype">int</span> min_top, <span class="keywordtype">int</span> max_top) {
<a name="l00483"></a>00483     unichars[unichar_id].properties.min_bottom =
<a name="l00484"></a>00484         <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a><span class="keyword">&gt;</span>(<a class="code" href="helpers_8h.html#aef2a0aa20a53322a6f27c86cc897c5e8">ClipToRange</a>(min_bottom, 0, <a class="code" href="host_8h.html#a05682ca8de174141447ff05a2289a27c">MAX_UINT8</a>));
<a name="l00485"></a>00485     unichars[unichar_id].properties.max_bottom =
<a name="l00486"></a>00486         <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a><span class="keyword">&gt;</span>(<a class="code" href="helpers_8h.html#aef2a0aa20a53322a6f27c86cc897c5e8">ClipToRange</a>(max_bottom, 0, <a class="code" href="host_8h.html#a05682ca8de174141447ff05a2289a27c">MAX_UINT8</a>));
<a name="l00487"></a>00487     unichars[unichar_id].properties.min_top =
<a name="l00488"></a>00488         <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a><span class="keyword">&gt;</span>(<a class="code" href="helpers_8h.html#aef2a0aa20a53322a6f27c86cc897c5e8">ClipToRange</a>(min_top, 0, <a class="code" href="host_8h.html#a05682ca8de174141447ff05a2289a27c">MAX_UINT8</a>));
<a name="l00489"></a>00489     unichars[unichar_id].properties.max_top =
<a name="l00490"></a>00490         <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a><span class="keyword">&gt;</span>(<a class="code" href="helpers_8h.html#aef2a0aa20a53322a6f27c86cc897c5e8">ClipToRange</a>(max_top, 0, <a class="code" href="host_8h.html#a05682ca8de174141447ff05a2289a27c">MAX_UINT8</a>));
<a name="l00491"></a>00491   }
<a name="l00492"></a>00492   <span class="comment">// Returns the width range of the given unichar in baseline-normalized</span>
<a name="l00493"></a>00493   <span class="comment">// coordinates, ie, where the baseline is kBlnBaselineOffset and the</span>
<a name="l00494"></a>00494   <span class="comment">// meanline is kBlnBaselineOffset + kBlnXHeight.</span>
<a name="l00495"></a>00495   <span class="comment">// (See normalis.h for the definitions).</span>
<a name="l00496"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ac680b784b3afbbd2a5aaa85de4f48ed2">00496</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ac680b784b3afbbd2a5aaa85de4f48ed2">get_width_range</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id,
<a name="l00497"></a>00497                        <span class="keywordtype">int</span>* min_width, <span class="keywordtype">int</span>* max_width)<span class="keyword"> const </span>{
<a name="l00498"></a>00498     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) {
<a name="l00499"></a>00499       *min_width = 0;
<a name="l00500"></a>00500       *max_width = 256;  <span class="comment">// kBlnCellHeight;</span>
<a name="l00501"></a>00501       <span class="keywordflow">return</span>;
<a name="l00502"></a>00502     }
<a name="l00503"></a>00503     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00504"></a>00504     *min_width = unichars[unichar_id].properties.min_width;
<a name="l00505"></a>00505     *max_width = unichars[unichar_id].properties.max_width;
<a name="l00506"></a>00506   }
<a name="l00507"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a230bb7ec4fd4135f13dbb9ec023b186b">00507</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a230bb7ec4fd4135f13dbb9ec023b186b">set_width_range</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id, <span class="keywordtype">int</span> min_width, <span class="keywordtype">int</span> max_width) {
<a name="l00508"></a>00508     unichars[unichar_id].properties.min_width =
<a name="l00509"></a>00509         <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a><span class="keyword">&gt;</span>(<a class="code" href="helpers_8h.html#aef2a0aa20a53322a6f27c86cc897c5e8">ClipToRange</a>(min_width, 0, <a class="code" href="host_8h.html#a3905e54374e49708219791e7d59c60fb">MAX_INT16</a>));
<a name="l00510"></a>00510     unichars[unichar_id].properties.max_width =
<a name="l00511"></a>00511         <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a><span class="keyword">&gt;</span>(<a class="code" href="helpers_8h.html#aef2a0aa20a53322a6f27c86cc897c5e8">ClipToRange</a>(max_width, 0, <a class="code" href="host_8h.html#a3905e54374e49708219791e7d59c60fb">MAX_INT16</a>));
<a name="l00512"></a>00512   }
<a name="l00513"></a>00513   <span class="comment">// Returns the range of the x-bearing of the given unichar in</span>
<a name="l00514"></a>00514   <span class="comment">// baseline-normalized coordinates, ie, where the baseline is</span>
<a name="l00515"></a>00515   <span class="comment">// kBlnBaselineOffset and the meanline is kBlnBaselineOffset + kBlnXHeight.</span>
<a name="l00516"></a>00516   <span class="comment">// (See normalis.h for the definitions).</span>
<a name="l00517"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a67f8a8936c2c021e34f4a1c878660e87">00517</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a67f8a8936c2c021e34f4a1c878660e87">get_bearing_range</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id,
<a name="l00518"></a>00518                          <span class="keywordtype">int</span>* min_bearing, <span class="keywordtype">int</span>* max_bearing)<span class="keyword"> const </span>{
<a name="l00519"></a>00519     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) {
<a name="l00520"></a>00520       *min_bearing = *max_bearing = 0;
<a name="l00521"></a>00521       <span class="keywordflow">return</span>;
<a name="l00522"></a>00522     }
<a name="l00523"></a>00523     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00524"></a>00524     *min_bearing = unichars[unichar_id].properties.min_bearing;
<a name="l00525"></a>00525     *max_bearing = unichars[unichar_id].properties.max_bearing;
<a name="l00526"></a>00526   }
<a name="l00527"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a082ec8a6bc50d6c2527c2885cf272f08">00527</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a082ec8a6bc50d6c2527c2885cf272f08">set_bearing_range</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id,
<a name="l00528"></a>00528                          <span class="keywordtype">int</span> min_bearing, <span class="keywordtype">int</span> max_bearing) {
<a name="l00529"></a>00529     unichars[unichar_id].properties.min_bearing =
<a name="l00530"></a>00530         <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a><span class="keyword">&gt;</span>(<a class="code" href="helpers_8h.html#aef2a0aa20a53322a6f27c86cc897c5e8">ClipToRange</a>(min_bearing, 0, <a class="code" href="host_8h.html#a3905e54374e49708219791e7d59c60fb">MAX_INT16</a>));
<a name="l00531"></a>00531     unichars[unichar_id].properties.max_bearing =
<a name="l00532"></a>00532         <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a><span class="keyword">&gt;</span>(<a class="code" href="helpers_8h.html#aef2a0aa20a53322a6f27c86cc897c5e8">ClipToRange</a>(max_bearing, 0, <a class="code" href="host_8h.html#a3905e54374e49708219791e7d59c60fb">MAX_INT16</a>));
<a name="l00533"></a>00533   }
<a name="l00534"></a>00534   <span class="comment">// Returns the range of the x-advance of the given unichar in</span>
<a name="l00535"></a>00535   <span class="comment">// baseline-normalized coordinates, ie, where the baseline is</span>
<a name="l00536"></a>00536   <span class="comment">// kBlnBaselineOffset and the meanline is kBlnBaselineOffset + kBlnXHeight.</span>
<a name="l00537"></a>00537   <span class="comment">// (See normalis.h for the definitions).</span>
<a name="l00538"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8a34350dc3ea46c693aae4e4f4fb33cb">00538</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8a34350dc3ea46c693aae4e4f4fb33cb">get_advance_range</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id,
<a name="l00539"></a>00539                          <span class="keywordtype">int</span>* min_advance, <span class="keywordtype">int</span>* max_advance)<span class="keyword"> const </span>{
<a name="l00540"></a>00540     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) {
<a name="l00541"></a>00541       *min_advance = *max_advance = 0;
<a name="l00542"></a>00542       <span class="keywordflow">return</span>;
<a name="l00543"></a>00543     }
<a name="l00544"></a>00544     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00545"></a>00545     *min_advance = unichars[unichar_id].properties.min_advance;
<a name="l00546"></a>00546     *max_advance = unichars[unichar_id].properties.max_advance;
<a name="l00547"></a>00547   }
<a name="l00548"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a15eaa8e19b0204a6aa515ee6a0cb58ba">00548</a>   <span class="keywordtype">void</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a15eaa8e19b0204a6aa515ee6a0cb58ba">set_advance_range</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id,
<a name="l00549"></a>00549                          <span class="keywordtype">int</span> min_advance, <span class="keywordtype">int</span> max_advance) {
<a name="l00550"></a>00550     unichars[unichar_id].properties.min_advance =
<a name="l00551"></a>00551         <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a><span class="keyword">&gt;</span>(<a class="code" href="helpers_8h.html#aef2a0aa20a53322a6f27c86cc897c5e8">ClipToRange</a>(min_advance, 0, <a class="code" href="host_8h.html#a3905e54374e49708219791e7d59c60fb">MAX_INT16</a>));
<a name="l00552"></a>00552     unichars[unichar_id].properties.max_advance =
<a name="l00553"></a>00553         <span class="keyword">static_cast&lt;</span><a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a><span class="keyword">&gt;</span>(<a class="code" href="helpers_8h.html#aef2a0aa20a53322a6f27c86cc897c5e8">ClipToRange</a>(max_advance, 0, <a class="code" href="host_8h.html#a3905e54374e49708219791e7d59c60fb">MAX_INT16</a>));
<a name="l00554"></a>00554   }
<a name="l00555"></a>00555 
<a name="l00556"></a>00556   <span class="comment">// Return the script name of the given unichar.</span>
<a name="l00557"></a>00557   <span class="comment">// The returned pointer will always be the same for the same script, it&#39;s</span>
<a name="l00558"></a>00558   <span class="comment">// managed by unicharset and thus MUST NOT be deleted</span>
<a name="l00559"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a77cdfcf9338d6565e6321a583392d5a1">00559</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a77cdfcf9338d6565e6321a583392d5a1">get_script</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00560"></a>00560     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> null_sid_;
<a name="l00561"></a>00561     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00562"></a>00562     <span class="keywordflow">return</span> unichars[unichar_id].properties.script_id;
<a name="l00563"></a>00563   }
<a name="l00564"></a>00564 
<a name="l00565"></a>00565   <span class="comment">// Return the character properties, eg. alpha/upper/lower/digit/punct,</span>
<a name="l00566"></a>00566   <span class="comment">// as a bit field of unsigned int.</span>
<a name="l00567"></a>00567   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a492d8caa4990fa50c481400db8f99915">get_properties</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id) <span class="keyword">const</span>;
<a name="l00568"></a>00568 
<a name="l00569"></a>00569   <span class="comment">// Return the character property as a single char.  If a character has</span>
<a name="l00570"></a>00570   <span class="comment">// multiple attributes, the main property is defined by the following order:</span>
<a name="l00571"></a>00571   <span class="comment">//   upper_case : &#39;A&#39;</span>
<a name="l00572"></a>00572   <span class="comment">//   lower_case : &#39;a&#39;</span>
<a name="l00573"></a>00573   <span class="comment">//   alpha      : &#39;x&#39;</span>
<a name="l00574"></a>00574   <span class="comment">//   digit      : &#39;0&#39;</span>
<a name="l00575"></a>00575   <span class="comment">//   punctuation: &#39;p&#39;</span>
<a name="l00576"></a>00576   <span class="keywordtype">char</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a52f4cf0d6d6e880201f62215770b457f">get_chartype</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id) <span class="keyword">const</span>;
<a name="l00577"></a>00577 
<a name="l00578"></a>00578   <span class="comment">// Get other_case unichar id in the properties for the given unichar id.</span>
<a name="l00579"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a63bccb6db92175f2c198261f576e7fca">00579</a>   <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a63bccb6db92175f2c198261f576e7fca">get_other_case</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00580"></a>00580     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> INVALID_UNICHAR_ID;
<a name="l00581"></a>00581     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00582"></a>00582     <span class="keywordflow">return</span> unichars[unichar_id].properties.other_case;
<a name="l00583"></a>00583   }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585   <span class="comment">// Returns the direction property of the given unichar.</span>
<a name="l00586"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a9f483f40e0030e839c614b9656bdb32c">00586</a>   <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078">Direction</a> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a9f483f40e0030e839c614b9656bdb32c">get_direction</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00587"></a>00587      <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078a5a183c9262a1161b5d34cf3d7c950cac">UNICHARSET::U_OTHER_NEUTRAL</a>;
<a name="l00588"></a>00588      <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00589"></a>00589      <span class="keywordflow">return</span> unichars[unichar_id].properties.direction;
<a name="l00590"></a>00590    }
<a name="l00591"></a>00591 
<a name="l00592"></a>00592   <span class="comment">// Get mirror unichar id in the properties for the given unichar id.</span>
<a name="l00593"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a30af8eb685f6e249da0798a7e67bffc7">00593</a>   <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a30af8eb685f6e249da0798a7e67bffc7">get_mirror</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00594"></a>00594     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> INVALID_UNICHAR_ID;
<a name="l00595"></a>00595     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00596"></a>00596     <span class="keywordflow">return</span> unichars[unichar_id].properties.mirror;
<a name="l00597"></a>00597   }
<a name="l00598"></a>00598 
<a name="l00599"></a>00599   <span class="comment">// Returns UNICHAR_ID of the corresponding lower-case unichar.</span>
<a name="l00600"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a00b50ec1de787807c383b204df642b44">00600</a>   <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a00b50ec1de787807c383b204df642b44">to_lower</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00601"></a>00601     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> INVALID_UNICHAR_ID;
<a name="l00602"></a>00602     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00603"></a>00603     <span class="keywordflow">if</span> (unichars[unichar_id].properties.islower) <span class="keywordflow">return</span> unichar_id;
<a name="l00604"></a>00604     <span class="keywordflow">return</span> unichars[unichar_id].properties.other_case;
<a name="l00605"></a>00605   }
<a name="l00606"></a>00606 
<a name="l00607"></a>00607   <span class="comment">// Returns UNICHAR_ID of the corresponding upper-case unichar.</span>
<a name="l00608"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8987e51404abd035c1c528a1bb31b47a">00608</a>   <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8987e51404abd035c1c528a1bb31b47a">to_upper</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00609"></a>00609     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> INVALID_UNICHAR_ID;
<a name="l00610"></a>00610     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00611"></a>00611     <span class="keywordflow">if</span> (unichars[unichar_id].properties.isupper) <span class="keywordflow">return</span> unichar_id;
<a name="l00612"></a>00612     <span class="keywordflow">return</span> unichars[unichar_id].properties.other_case;
<a name="l00613"></a>00613   }
<a name="l00614"></a>00614 
<a name="l00615"></a>00615   <span class="comment">// Return a pointer to the CHAR_FRAGMENT class if the given</span>
<a name="l00616"></a>00616   <span class="comment">// unichar id represents a character fragment.</span>
<a name="l00617"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af08440927e3b87f99bd3a3fbd8e126dc">00617</a>   <span class="keyword">const</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> *<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af08440927e3b87f99bd3a3fbd8e126dc">get_fragment</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00618"></a>00618     <span class="keywordflow">if</span> (INVALID_UNICHAR_ID == unichar_id) <span class="keywordflow">return</span> <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00619"></a>00619     <a class="code" href="errcode_8h.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25b5caa89a70f8348c61cd46129ad2d1">contains_unichar_id</a>(unichar_id));
<a name="l00620"></a>00620     <span class="keywordflow">return</span> unichars[unichar_id].properties.fragment;
<a name="l00621"></a>00621   }
<a name="l00622"></a>00622 
<a name="l00623"></a>00623   <span class="comment">// Return the isalpha property of the given unichar representation.</span>
<a name="l00624"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa6b6518f828b287e3ce4f37f8876b487">00624</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa6b6518f828b287e3ce4f37f8876b487">get_isalpha</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr)<span class="keyword"> const </span>{
<a name="l00625"></a>00625     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ad1dd0929edfb0e9e4905cc2fbeff42c2">get_isalpha</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr));
<a name="l00626"></a>00626   }
<a name="l00627"></a>00627 
<a name="l00628"></a>00628   <span class="comment">// Return the islower property of the given unichar representation.</span>
<a name="l00629"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a63d564b3b94207b1bc7f16308599521a">00629</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a63d564b3b94207b1bc7f16308599521a">get_islower</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr)<span class="keyword"> const </span>{
<a name="l00630"></a>00630     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a074096c823dd5b9bc02c02a59784bf34">get_islower</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr));
<a name="l00631"></a>00631   }
<a name="l00632"></a>00632 
<a name="l00633"></a>00633   <span class="comment">// Return the isupper property of the given unichar representation.</span>
<a name="l00634"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a00a418bf7e937717ce13aa531cd83932">00634</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a00a418bf7e937717ce13aa531cd83932">get_isupper</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr)<span class="keyword"> const </span>{
<a name="l00635"></a>00635     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a482a94b3e6fcd4e5b9b9363bb9e0ee59">get_isupper</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr));
<a name="l00636"></a>00636   }
<a name="l00637"></a>00637 
<a name="l00638"></a>00638   <span class="comment">// Return the isdigit property of the given unichar representation.</span>
<a name="l00639"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aed126e879fda83f1a8950c4b4076d0b7">00639</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aed126e879fda83f1a8950c4b4076d0b7">get_isdigit</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr)<span class="keyword"> const </span>{
<a name="l00640"></a>00640     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a5951dde3ab90c12c309d776570a10725">get_isdigit</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr));
<a name="l00641"></a>00641   }
<a name="l00642"></a>00642 
<a name="l00643"></a>00643   <span class="comment">// Return the ispunctuation property of the given unichar representation.</span>
<a name="l00644"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a2a1a4ddeb802e4ab3e0985475a1b7ff8">00644</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a2a1a4ddeb802e4ab3e0985475a1b7ff8">get_ispunctuation</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr)<span class="keyword"> const </span>{
<a name="l00645"></a>00645     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a57f82c4777d39c923cb9ec27cac9bcb6">get_ispunctuation</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr));
<a name="l00646"></a>00646   }
<a name="l00647"></a>00647 
<a name="l00648"></a>00648   <span class="comment">// Return the character properties, eg. alpha/upper/lower/digit/punct,</span>
<a name="l00649"></a>00649   <span class="comment">// of the given unichar representation</span>
<a name="l00650"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a5f9f3805df481c8b8c892d4d524e45b7">00650</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a5f9f3805df481c8b8c892d4d524e45b7">get_properties</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr)<span class="keyword"> const </span>{
<a name="l00651"></a>00651     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a492d8caa4990fa50c481400db8f99915">get_properties</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr));
<a name="l00652"></a>00652   }
<a name="l00653"></a>00653 
<a name="l00654"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a53bec55a3740655b0efb1e004fbdce25">00654</a>   <span class="keywordtype">char</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a53bec55a3740655b0efb1e004fbdce25">get_chartype</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr)<span class="keyword"> const </span>{
<a name="l00655"></a>00655     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a52f4cf0d6d6e880201f62215770b457f">get_chartype</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr));
<a name="l00656"></a>00656   }
<a name="l00657"></a>00657 
<a name="l00658"></a>00658   <span class="comment">// Return the script name of the given unichar representation.</span>
<a name="l00659"></a>00659   <span class="comment">// The returned pointer will always be the same for the same script, it&#39;s</span>
<a name="l00660"></a>00660   <span class="comment">// managed by unicharset and thus MUST NOT be deleted</span>
<a name="l00661"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a6fed67e2af48bf3fe940bcecb272a330">00661</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a6fed67e2af48bf3fe940bcecb272a330">get_script</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr)<span class="keyword"> const </span>{
<a name="l00662"></a>00662     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a77cdfcf9338d6565e6321a583392d5a1">get_script</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr));
<a name="l00663"></a>00663   }
<a name="l00664"></a>00664 
<a name="l00665"></a>00665   <span class="comment">// Return a pointer to the CHAR_FRAGMENT class struct if the given</span>
<a name="l00666"></a>00666   <span class="comment">// unichar representation represents a character fragment.</span>
<a name="l00667"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a21b7d1da075b77903e718a0d78bd96ff">00667</a>   <span class="keyword">const</span> <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> *<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a21b7d1da075b77903e718a0d78bd96ff">get_fragment</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr)<span class="keyword"> const </span>{
<a name="l00668"></a>00668     <span class="keywordflow">if</span> (unichar_repr == <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || unichar_repr[0] == <span class="charliteral">&#39;\0&#39;</span> ||
<a name="l00669"></a>00669         !ids.<a class="code" href="class_u_n_i_c_h_a_r_m_a_p.html#a7b62f14a3fc81145f3e4df6fe7ae64ce">contains</a>(unichar_repr)) {
<a name="l00670"></a>00670       <span class="keywordflow">return</span> <a class="code" href="host_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00671"></a>00671     }
<a name="l00672"></a>00672     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af08440927e3b87f99bd3a3fbd8e126dc">get_fragment</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr));
<a name="l00673"></a>00673   }
<a name="l00674"></a>00674 
<a name="l00675"></a>00675   <span class="comment">// Return the isalpha property of the given unichar representation.</span>
<a name="l00676"></a>00676   <span class="comment">// Only the first length characters from unichar_repr are used.</span>
<a name="l00677"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a25decd5aefdf67bf8c963495dfe5b7f8">00677</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ad1dd0929edfb0e9e4905cc2fbeff42c2">get_isalpha</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr,
<a name="l00678"></a>00678                <span class="keywordtype">int</span> length)<span class="keyword"> const </span>{
<a name="l00679"></a>00679     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ad1dd0929edfb0e9e4905cc2fbeff42c2">get_isalpha</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr, length));
<a name="l00680"></a>00680   }
<a name="l00681"></a>00681 
<a name="l00682"></a>00682   <span class="comment">// Return the islower property of the given unichar representation.</span>
<a name="l00683"></a>00683   <span class="comment">// Only the first length characters from unichar_repr are used.</span>
<a name="l00684"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ad0ad9d179358b10336046e1e33157aab">00684</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a074096c823dd5b9bc02c02a59784bf34">get_islower</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr,
<a name="l00685"></a>00685                <span class="keywordtype">int</span> length)<span class="keyword"> const </span>{
<a name="l00686"></a>00686     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a074096c823dd5b9bc02c02a59784bf34">get_islower</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr, length));
<a name="l00687"></a>00687   }
<a name="l00688"></a>00688 
<a name="l00689"></a>00689   <span class="comment">// Return the isupper property of the given unichar representation.</span>
<a name="l00690"></a>00690   <span class="comment">// Only the first length characters from unichar_repr are used.</span>
<a name="l00691"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8b71689a5a8259f078971039ee571b67">00691</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a482a94b3e6fcd4e5b9b9363bb9e0ee59">get_isupper</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr,
<a name="l00692"></a>00692                <span class="keywordtype">int</span> length)<span class="keyword"> const </span>{
<a name="l00693"></a>00693     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a482a94b3e6fcd4e5b9b9363bb9e0ee59">get_isupper</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr, length));
<a name="l00694"></a>00694   }
<a name="l00695"></a>00695 
<a name="l00696"></a>00696   <span class="comment">// Return the isdigit property of the given unichar representation.</span>
<a name="l00697"></a>00697   <span class="comment">// Only the first length characters from unichar_repr are used.</span>
<a name="l00698"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aef78d469c80a24e301f29948f24517db">00698</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a5951dde3ab90c12c309d776570a10725">get_isdigit</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr,
<a name="l00699"></a>00699                <span class="keywordtype">int</span> length)<span class="keyword"> const </span>{
<a name="l00700"></a>00700     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a5951dde3ab90c12c309d776570a10725">get_isdigit</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr, length));
<a name="l00701"></a>00701   }
<a name="l00702"></a>00702 
<a name="l00703"></a>00703   <span class="comment">// Return the ispunctuation property of the given unichar representation.</span>
<a name="l00704"></a>00704   <span class="comment">// Only the first length characters from unichar_repr are used.</span>
<a name="l00705"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8e0e2a0229acf85b5a5eab5f6bc7d122">00705</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a57f82c4777d39c923cb9ec27cac9bcb6">get_ispunctuation</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr,
<a name="l00706"></a>00706                           <span class="keywordtype">int</span> length)<span class="keyword"> const </span>{
<a name="l00707"></a>00707     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a57f82c4777d39c923cb9ec27cac9bcb6">get_ispunctuation</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr, length));
<a name="l00708"></a>00708   }
<a name="l00709"></a>00709 
<a name="l00710"></a>00710   <span class="comment">// Returns normalized version of unichar with the given unichar_id.</span>
<a name="l00711"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a1c9099b44ba61ade75d2a5c6d782f146">00711</a>   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a1c9099b44ba61ade75d2a5c6d782f146">get_normed_unichar</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00712"></a>00712     <span class="keywordflow">return</span> unichars[unichar_id].properties.normed.string();
<a name="l00713"></a>00713   }
<a name="l00714"></a>00714 
<a name="l00715"></a>00715   <span class="comment">// Return the script name of the given unichar representation.</span>
<a name="l00716"></a>00716   <span class="comment">// Only the first length characters from unichar_repr are used.</span>
<a name="l00717"></a>00717   <span class="comment">// The returned pointer will always be the same for the same script, it&#39;s</span>
<a name="l00718"></a>00718   <span class="comment">// managed by unicharset and thus MUST NOT be deleted</span>
<a name="l00719"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a00f1ea0eb9bd785e9b81597ef769ac28">00719</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a77cdfcf9338d6565e6321a583392d5a1">get_script</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> unichar_repr,
<a name="l00720"></a>00720                  <span class="keywordtype">int</span> length)<span class="keyword"> const </span>{
<a name="l00721"></a>00721     <span class="keywordflow">return</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a77cdfcf9338d6565e6321a583392d5a1">get_script</a>(<a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar_repr, length));
<a name="l00722"></a>00722   }
<a name="l00723"></a>00723 
<a name="l00724"></a>00724   <span class="comment">// Return the (current) number of scripts in the script table</span>
<a name="l00725"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a0135deaa943171c17951190c4cba43f8">00725</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a0135deaa943171c17951190c4cba43f8">get_script_table_size</a>()<span class="keyword"> const </span>{
<a name="l00726"></a>00726     <span class="keywordflow">return</span> script_table_size_used;
<a name="l00727"></a>00727   }
<a name="l00728"></a>00728 
<a name="l00729"></a>00729   <span class="comment">// Return the script string from its id</span>
<a name="l00730"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a4fc0f6815e2091efedcff7ab6183d19a">00730</a>   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a4fc0f6815e2091efedcff7ab6183d19a">get_script_from_script_id</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>)<span class="keyword"> const </span>{
<a name="l00731"></a>00731     <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= script_table_size_used || <span class="keywordtype">id</span> &lt; 0)
<a name="l00732"></a>00732       <span class="keywordflow">return</span> null_script;
<a name="l00733"></a>00733     <span class="keywordflow">return</span> script_table[id];
<a name="l00734"></a>00734   }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736   <span class="comment">// Returns the id from the name of the script, or 0 if script is not found.</span>
<a name="l00737"></a>00737   <span class="comment">// Note that this is an expensive operation since it involves iteratively</span>
<a name="l00738"></a>00738   <span class="comment">// comparing strings in the script table.  To avoid dependency on STL, we</span>
<a name="l00739"></a>00739   <span class="comment">// won&#39;t use a hash.  Instead, the calling function can use this to lookup</span>
<a name="l00740"></a>00740   <span class="comment">// and save the ID for relevant scripts for fast comparisons later.</span>
<a name="l00741"></a>00741   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a4b2038eaf3a0a23d2d877705919ce547">get_script_id_from_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* script_name) <span class="keyword">const</span>;
<a name="l00742"></a>00742 
<a name="l00743"></a>00743   <span class="comment">// Return true if the given script is the null script</span>
<a name="l00744"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae9664690f3ea611a4b67ab1e928850ec">00744</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae9664690f3ea611a4b67ab1e928850ec">is_null_script</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* script)<span class="keyword"> const </span>{
<a name="l00745"></a>00745     <span class="keywordflow">return</span> script == null_script;
<a name="l00746"></a>00746   }
<a name="l00747"></a>00747 
<a name="l00748"></a>00748   <span class="comment">// Uniquify the given script. For two scripts a and b, if strcmp(a, b) == 0,</span>
<a name="l00749"></a>00749   <span class="comment">// then the returned pointer will be the same.</span>
<a name="l00750"></a>00750   <span class="comment">// The script parameter is copied and thus can be a temporary.</span>
<a name="l00751"></a>00751   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7cbfd800fe71082f0e7d58b7c25330bb">add_script</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* script);
<a name="l00752"></a>00752 
<a name="l00753"></a>00753   <span class="comment">// Return the enabled property of the given unichar.</span>
<a name="l00754"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa5f5f5b010151daf76255777aebeea18">00754</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa5f5f5b010151daf76255777aebeea18">get_enabled</a>(<a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id)<span class="keyword"> const </span>{
<a name="l00755"></a>00755     <span class="keywordflow">return</span> unichars[unichar_id].properties.enabled;
<a name="l00756"></a>00756   }
<a name="l00757"></a>00757 
<a name="l00758"></a>00758 
<a name="l00759"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a126914ee29131685037c122375169a62">00759</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a126914ee29131685037c122375169a62">null_sid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> null_sid_; }
<a name="l00760"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#afbc7acb1dfe87ae557e9b288ee3a5313">00760</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#afbc7acb1dfe87ae557e9b288ee3a5313">common_sid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> common_sid_; }
<a name="l00761"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8e350b11280c6de222ae31697f882a94">00761</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a8e350b11280c6de222ae31697f882a94">latin_sid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> latin_sid_; }
<a name="l00762"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa281a2c077ff46aaa8b05b9eeddf0b60">00762</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#aa281a2c077ff46aaa8b05b9eeddf0b60">cyrillic_sid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> cyrillic_sid_; }
<a name="l00763"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a4c5b22157ef466723d2e496a4fa0c1dd">00763</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a4c5b22157ef466723d2e496a4fa0c1dd">greek_sid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> greek_sid_; }
<a name="l00764"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af6459dc0dd8e46d86504c861bdf3b89a">00764</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#af6459dc0dd8e46d86504c861bdf3b89a">han_sid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> han_sid_; }
<a name="l00765"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#acb42b72a86cd0c1285a2a769b54eebbd">00765</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#acb42b72a86cd0c1285a2a769b54eebbd">hiragana_sid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> hiragana_sid_; }
<a name="l00766"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#adc40797ac6843aeef70069b051266226">00766</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#adc40797ac6843aeef70069b051266226">katakana_sid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> katakana_sid_; }
<a name="l00767"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a60d24058a4f5184ea7a782f62ec9b348">00767</a>   <span class="keywordtype">int</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a60d24058a4f5184ea7a782f62ec9b348">default_sid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> default_sid_; }
<a name="l00768"></a>00768 
<a name="l00769"></a>00769   <span class="comment">// Returns true if the unicharset has the concept of upper/lower case.</span>
<a name="l00770"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7e4face7fed80af60ba9576693bffb21">00770</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a7e4face7fed80af60ba9576693bffb21">script_has_upper_lower</a>()<span class="keyword"> const </span>{
<a name="l00771"></a>00771     <span class="keywordflow">return</span> script_has_upper_lower_;
<a name="l00772"></a>00772   }
<a name="l00773"></a>00773   <span class="comment">// Returns true if the unicharset has the concept of x-height.</span>
<a name="l00774"></a>00774   <span class="comment">// script_has_xheight can be true even if script_has_upper_lower is not,</span>
<a name="l00775"></a>00775   <span class="comment">// when the script has a sufficiently predominant top line with ascenders,</span>
<a name="l00776"></a>00776   <span class="comment">// such as Devanagari and Thai.</span>
<a name="l00777"></a><a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae3603311be9589e326ed25969fa53a97">00777</a>   <span class="keywordtype">bool</span> <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#ae3603311be9589e326ed25969fa53a97">script_has_xheight</a>()<span class="keyword"> const </span>{
<a name="l00778"></a>00778     <span class="keywordflow">return</span> script_has_xheight_;
<a name="l00779"></a>00779   }
<a name="l00780"></a>00780 
<a name="l00781"></a>00781  <span class="keyword">private</span>:
<a name="l00782"></a>00782 
<a name="l00783"></a>00783   <span class="keyword">struct </span>UNICHAR_PROPERTIES {
<a name="l00784"></a>00784     UNICHAR_PROPERTIES();
<a name="l00785"></a>00785     <span class="comment">// Initializes all properties to sensible default values.</span>
<a name="l00786"></a>00786     <span class="keywordtype">void</span> Init();
<a name="l00787"></a>00787     <span class="comment">// Sets all ranges wide open. Initialization default in case there are</span>
<a name="l00788"></a>00788     <span class="comment">// no useful values available.</span>
<a name="l00789"></a>00789     <span class="keywordtype">void</span> SetRangesOpen();
<a name="l00790"></a>00790     <span class="comment">// Sets all ranges to empty. Used before expanding with font-based data.</span>
<a name="l00791"></a>00791     <span class="keywordtype">void</span> SetRangesEmpty();
<a name="l00792"></a>00792     <span class="comment">// Returns true if any of the top/bottom/width/bearing/advance ranges is</span>
<a name="l00793"></a>00793     <span class="comment">// emtpy.</span>
<a name="l00794"></a>00794     <span class="keywordtype">bool</span> AnyRangeEmpty() <span class="keyword">const</span>;
<a name="l00795"></a>00795     <span class="comment">// Expands the ranges with the ranges from the src properties.</span>
<a name="l00796"></a>00796     <span class="keywordtype">void</span> ExpandRangesFrom(<span class="keyword">const</span> UNICHAR_PROPERTIES&amp; src);
<a name="l00797"></a>00797     <span class="comment">// Copies the properties from src into this.</span>
<a name="l00798"></a>00798     <span class="keywordtype">void</span> CopyFrom(<span class="keyword">const</span> UNICHAR_PROPERTIES&amp; src);
<a name="l00799"></a>00799 
<a name="l00800"></a>00800     <span class="keywordtype">bool</span>  isalpha;
<a name="l00801"></a>00801     <span class="keywordtype">bool</span>  islower;
<a name="l00802"></a>00802     <span class="keywordtype">bool</span>  isupper;
<a name="l00803"></a>00803     <span class="keywordtype">bool</span>  isdigit;
<a name="l00804"></a>00804     <span class="keywordtype">bool</span>  ispunctuation;
<a name="l00805"></a>00805     <span class="keywordtype">bool</span>  isngram;
<a name="l00806"></a>00806     <span class="keywordtype">bool</span>  enabled;
<a name="l00807"></a>00807     <span class="comment">// Possible limits of the top and bottom of the bounding box in</span>
<a name="l00808"></a>00808     <span class="comment">// baseline-normalized coordinates, ie, where the baseline is</span>
<a name="l00809"></a>00809     <span class="comment">// kBlnBaselineOffset and the meanline is kBlnBaselineOffset + kBlnXHeight</span>
<a name="l00810"></a>00810     <span class="comment">// (See normalis.h for the definitions).</span>
<a name="l00811"></a>00811     <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> min_bottom;
<a name="l00812"></a>00812     <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> max_bottom;
<a name="l00813"></a>00813     <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> min_top;
<a name="l00814"></a>00814     <a class="code" href="host_8h.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> max_top;
<a name="l00815"></a>00815     <span class="comment">// Limits on the widths of bounding box, also in baseline-normalized coords.</span>
<a name="l00816"></a>00816     <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> min_width;
<a name="l00817"></a>00817     <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> max_width;
<a name="l00818"></a>00818     <span class="comment">// Limits on the x-bearing and advance, also in baseline-normalized coords.</span>
<a name="l00819"></a>00819     <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> min_bearing;
<a name="l00820"></a>00820     <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> max_bearing;
<a name="l00821"></a>00821     <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> min_advance;
<a name="l00822"></a>00822     <a class="code" href="host_8h.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> max_advance;
<a name="l00823"></a>00823     <span class="keywordtype">int</span>   script_id;
<a name="l00824"></a>00824     <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> other_case;  <span class="comment">// id of the corresponding upper/lower case unichar</span>
<a name="l00825"></a>00825     <a class="code" href="class_u_n_i_c_h_a_r_s_e_t.html#a31e06ec0b942a9d392db21b49cf40078">Direction</a> <a class="code" href="vecfuncs_8cpp.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a>;  <span class="comment">// direction of this unichar</span>
<a name="l00826"></a>00826     <span class="comment">// Mirror property is useful for reverse DAWG lookup for words in</span>
<a name="l00827"></a>00827     <span class="comment">// right-to-left languages (e.g. &quot;(word)&quot; would be in</span>
<a name="l00828"></a>00828     <span class="comment">// &#39;[open paren]&#39; &#39;w&#39; &#39;o&#39; &#39;r&#39; &#39;d&#39; &#39;[close paren]&#39; in a UTF8 string.</span>
<a name="l00829"></a>00829     <span class="comment">// However, what we want in our DAWG is</span>
<a name="l00830"></a>00830     <span class="comment">// &#39;[open paren]&#39;, &#39;d&#39;, &#39;r&#39;, &#39;o&#39;, &#39;w&#39;, &#39;[close paren]&#39; not</span>
<a name="l00831"></a>00831     <span class="comment">// &#39;[close paren]&#39;, &#39;d&#39;, &#39;r&#39;, &#39;o&#39;, &#39;w&#39;, &#39;[open paren]&#39;.</span>
<a name="l00832"></a>00832     <a class="code" href="unichar_8h.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> mirror;
<a name="l00833"></a>00833     <a class="code" href="class_s_t_r_i_n_g.html">STRING</a> normed;  <span class="comment">// normalized version of this unichar</span>
<a name="l00834"></a>00834     <span class="comment">// Contains meta information about the fragment if a unichar represents</span>
<a name="l00835"></a>00835     <span class="comment">// a fragment of a character, otherwise should be set to NULL.</span>
<a name="l00836"></a>00836     <span class="comment">// It is assumed that character fragments are added to the unicharset</span>
<a name="l00837"></a>00837     <span class="comment">// after the corresponding &#39;base&#39; characters.</span>
<a name="l00838"></a>00838     <a class="code" href="class_c_h_a_r___f_r_a_g_m_e_n_t.html">CHAR_FRAGMENT</a> *fragment;
<a name="l00839"></a>00839   };
<a name="l00840"></a>00840 
<a name="l00841"></a>00841   <span class="keyword">struct </span>UNICHAR_SLOT {
<a name="l00842"></a>00842     <span class="keywordtype">char</span> representation[<a class="code" href="unichar_8h.html#a902bc40c9d89802bc063afe30ce9e708">UNICHAR_LEN</a> + 1];
<a name="l00843"></a>00843     UNICHAR_PROPERTIES properties;
<a name="l00844"></a>00844   };
<a name="l00845"></a>00845 
<a name="l00846"></a>00846   <span class="comment">// Gets the properties for a grapheme string, combining properties for</span>
<a name="l00847"></a>00847   <span class="comment">// multiple characters in a meaningful way where possible.</span>
<a name="l00848"></a>00848   <span class="comment">// Returns false if no valid match was found in the unicharset.</span>
<a name="l00849"></a>00849   <span class="comment">// NOTE that script_id, mirror, and other_case refer to this unicharset on</span>
<a name="l00850"></a>00850   <span class="comment">// return and will need redirecting if the target unicharset is different.</span>
<a name="l00851"></a>00851   <span class="keywordtype">bool</span> GetStrProperties(<span class="keyword">const</span> <span class="keywordtype">char</span>* utf8_str,
<a name="l00852"></a>00852                         UNICHAR_PROPERTIES* props) <span class="keyword">const</span>;
<a name="l00853"></a>00853 
<a name="l00854"></a>00854   <span class="comment">// Load ourselves from a &quot;file&quot; where our only interface to the file is</span>
<a name="l00855"></a>00855   <span class="comment">// an implementation of fgets().  This is the parsing primitive accessed by</span>
<a name="l00856"></a>00856   <span class="comment">// the public routines load_from_file() and load_from_inmemory_file().</span>
<a name="l00857"></a>00857   <span class="keywordtype">bool</span> load_via_fgets(<a class="code" href="class_tess_result_callback2.html">TessResultCallback2&lt;char *, char *, int&gt;</a> *fgets_cb,
<a name="l00858"></a>00858                       <span class="keywordtype">bool</span> skip_fragments);
<a name="l00859"></a>00859 
<a name="l00860"></a>00860   UNICHAR_SLOT* unichars;
<a name="l00861"></a>00861   <a class="code" href="class_u_n_i_c_h_a_r_m_a_p.html">UNICHARMAP</a> ids;
<a name="l00862"></a>00862   <span class="keywordtype">int</span> size_used;
<a name="l00863"></a>00863   <span class="keywordtype">int</span> size_reserved;
<a name="l00864"></a>00864   <span class="keywordtype">char</span>** script_table;
<a name="l00865"></a>00865   <span class="keywordtype">int</span> script_table_size_used;
<a name="l00866"></a>00866   <span class="keywordtype">int</span> script_table_size_reserved;
<a name="l00867"></a>00867   <span class="keyword">const</span> <span class="keywordtype">char</span>* null_script;
<a name="l00868"></a>00868   <span class="comment">// True if the unichars have their tops/bottoms set.</span>
<a name="l00869"></a>00869   <span class="keywordtype">bool</span> top_bottom_set_;
<a name="l00870"></a>00870   <span class="comment">// True if the unicharset has significant upper/lower case chars.</span>
<a name="l00871"></a>00871   <span class="keywordtype">bool</span> script_has_upper_lower_;
<a name="l00872"></a>00872   <span class="comment">// True if the unicharset has a significant mean-line with significant</span>
<a name="l00873"></a>00873   <span class="comment">// ascenders above that.</span>
<a name="l00874"></a>00874   <span class="keywordtype">bool</span> script_has_xheight_;
<a name="l00875"></a>00875 
<a name="l00876"></a>00876   <span class="comment">// A few convenient script name-to-id mapping without using hash.</span>
<a name="l00877"></a>00877   <span class="comment">// These are initialized when unicharset file is loaded.  Anything</span>
<a name="l00878"></a>00878   <span class="comment">// missing from this list can be looked up using get_script_id_from_name.</span>
<a name="l00879"></a>00879   <span class="keywordtype">int</span> null_sid_;
<a name="l00880"></a>00880   <span class="keywordtype">int</span> common_sid_;
<a name="l00881"></a>00881   <span class="keywordtype">int</span> latin_sid_;
<a name="l00882"></a>00882   <span class="keywordtype">int</span> cyrillic_sid_;
<a name="l00883"></a>00883   <span class="keywordtype">int</span> greek_sid_;
<a name="l00884"></a>00884   <span class="keywordtype">int</span> han_sid_;
<a name="l00885"></a>00885   <span class="keywordtype">int</span> hiragana_sid_;
<a name="l00886"></a>00886   <span class="keywordtype">int</span> katakana_sid_;
<a name="l00887"></a>00887   <span class="comment">// The most frequently occurring script in the charset.</span>
<a name="l00888"></a>00888   <span class="keywordtype">int</span> default_sid_;
<a name="l00889"></a>00889 };
<a name="l00890"></a>00890 
<a name="l00891"></a>00891 <span class="preprocessor">#endif  // TESSERACT_CCUTIL_UNICHARSET_H__</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Feb 2 08:19:20 2012 for Tesseract by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
